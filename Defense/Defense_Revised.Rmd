---
count: false
exclude: true
output: 
  xaringan::moon_reader: 
    seal: false
    css: ["default", "default-fonts", "hygge"]
    nature:
      includePresenterNotes: true
      countdown: 45000
      navigation:
        scroll: false
        
---
exclude: true

```{css, echo = F}
.partial-bg {
  background-image: linear-gradient(0deg, black);
}

ol {
  counter-reset: list;
}
ol > li {
  list-style: none;
  padding: 10px 0px 0px; 
}
ol > li:before {
  content: counter(list) ") ";
  counter-increment: list;
}
ol > li:not(:last-child) {
    margin-bottom: 5px;
}

li:not(:last-child) {
    margin-bottom: 5px;
}

.pre {
  height: 30pc;
  overflow-y: scroll;
}

.pink { color: Orchid; }

.coral { color: Coral; }

.cblue { color: CornflowerBlue; }
```

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)

library(tidyverse) # load tidyverse package
library(countdown)
library(apaTables)
library(tidyverse)
library(purrr)
library(tidyr)
library(ggplot2)
library(correlation)
library(varhandle)
library(cowplot) 
library(ggstatsplot)
library(sjPlot)
library(sjmisc)
library(ggplot2)
library(psych)
library(ggpubr)
library(Hmisc)
library(ggnewscale)
library(emmeans)
library(ggsci)
library(data.table)
library(multcomp)
library(report)
library(broom)
library(rstatix)
library(ggfortify)
library(stats)
library(magick)

theme_set(theme_sjplot())

knitr::opts_chunk$set(fig.retina = 3, warning = FALSE, message = FALSE)

setwd("/Users/carolinelee/Desktop/Honors")

dat1 <- read.csv(file = 'undergrad_dat.csv', header = TRUE)
dat2 <- read.csv(file = 'undergrad_dat_ppin.csv', header = TRUE)
dat3 <- read.csv(file = 'prolific_dat.csv', header = TRUE)
dat4 <- read.csv(file = 'prolific_dat_ppin.csv', header = TRUE)

undergrad_dat <- dplyr::bind_rows(dat1, dat2)

table(undergrad_dat$attention_check) 

undergrad_dat <-
  undergrad_dat %>% filter(attention_check == "TRUE")

prolific_dat <- dplyr::bind_rows(dat3, dat4)

table(prolific_dat$attention_check) 

prolific_dat <-
  prolific_dat %>% filter(attention_check == "TRUE")

combined_dat <- dplyr::bind_rows(undergrad_dat, prolific_dat)

combined_dat <- combined_dat %>% mutate(AffectiveFeedback = ifelse(condition == 1, "Cooperative", 
                                                                   ifelse(condition == 2, "Competitive",
                                                                          ifelse(condition == 3, "Cooperative",
                                                                                 "Competitive"))),
                                        Stroop = ifelse(condition == 1 | condition == 2, "Incongruent", "Congruent")
)

```

---

class: partial-bg center, middle, inverse
count: false

# The Influence of Psychopathic Traits and Affective Feedback on Cooperation in the Iterated Prisoner's Dilemma 

### Caroline Lee 
### Advisors: Andrew Kazama, Ph.D., Scott Lilienfeld, Ph.D. 
### Committee Members: Umberto Mignozzetti, Ph.D., Stephan Hamann, Ph.D., Michal Arbilly, Ph.D.
### Mentors: Thomas Costello, M.A., Shauna Bowes, M.A.
### Emory Department of Psychology

???

Hello and welcome everyone, thank you so much for attending my defense. I would first like to extend a huge thank you to my current advisor Dr. Kazama, all of my commitee members - Dr. Hamann, Dr. Mignozzetti, and Dr. Arbilly, my late advisor Dr. Scott Lilienfeld, and my graduate student mentors Tom and Shauna for the all support and mentorship throughout my undergraduate career and for this thesis. I would not have been able to find my love for research and psychology and complete this thesis without your support and I am so grateful for all the opportunities and support you've given me. 

---

## Presentation Outline 

```{css, echo = F}
ol {
  counter-reset: list;
}
ol > li {
  list-style: none;
  padding: 20px 0px 0px; 
}
ol > li:before {
  content: counter(list) ") ";
  counter-increment: list;
}
ol > li:not(:last-child) {
    margin-bottom: 5px;
}

li:not(:last-child) {
    margin-bottom: 5px;
}

```

<ol>
  <li><strong>Introduction to psychopathy</strong> </li>

???

So before I start with the presentation, I wanted to go over a quick outline of the talk - I'll start with a brief intro to psychopathy, Cognitive and emotional processing in psychopathy, interactive and individual influence of psychopathy and associated cognitive & affective processes and how they might influence interdependent decision making, 

and go over my thesis project, how it adds to the existing research, methods, what I found and the implications 

and I look forward to receiving your questions and feedback at the end of the presentation 
--

  <li><strong>Cognitive and emotional processing in psychopathy </strong></li>

--
  <li><strong>Interactive and individual influence of psychopathy and associated cognitive & affective processes on interdependent decision making </strong></li>
  
--
  <li><strong>Current Study </strong></li>
  
--
  <li><strong>Questions</strong></li>
</ol>

---

## Psychopathy 

???

So I first want to start with a brief introduction to psychopathy. 

Before I learned about research on psychopathy my freshman year, I would say that my understanding of psychopathy was pretty much based on interesting depictions of who a "psychopath" might be like from popular media including tv shows, movies, and stories about serial killers who you might also know including ted bundy, john wayne gacy aka pogo the clown who's very scary, and charles manson the famous cult leader.

---

count: false
## Psychopathy 

![k1](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/k1.png)
.small[.left[.footnote[.gray[Associated Press, 1968; Chicago Tribune, 2021; Jenkins, 2022 ]]]]

???

So I first want to start with a brief introduction to psychopathy. 

Before I learned about research on psychopathy my freshman year, I would say that my understanding of psychopathy was pretty much based on interesting depictions of who a "psychopath" might be like from popular media including tv shows, movies, and stories about serial killers who you might also know including ted bundy, john wayne gacy aka pogo the clown who's very scary, and charles manson the famous cult leader.

---
count: false
## Psychopathy 

![k2](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/k2.png)
.small[.left[.footnote[.gray[Associated Press, 1968; Chicago Tribune, 2021; Jenkins, 2022 ]]]]

???

So I first want to start with a brief introduction to psychopathy. 

Before I learned about research on psychopathy my freshman year, I would say that my understanding of psychopathy was pretty much based on interesting depictions of who a "psychopath" might be like from popular media including tv shows, movies, and stories about serial killers who you might also know including ted bundy, john wayne gacy aka pogo the clown who's very scary, and charles manson the famous cult leader.

---
count: false
## Psychopathy 

![k3](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/k3.png)

.small[.left[.footnote[.gray[Associated Press, 1968; Chicago Tribune, 2021; Jenkins, 2022]]]]

???

So I first want to start with a brief introduction to psychopathy. 

Before I learned about research on psychopathy my freshman year, I would say that my understanding of psychopathy was pretty much based in interesting depictions of who a "psychopath" would be like from popular media including tv shows, movies, and stories about serial killers who you might also know including ted bundy, john wayne gacy aka pogo the clown who's very scary, and charles manson the famous cult leader.

---

## Psychopathy 

![debrito](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/debrito.png)

???

And there are many misconceptions about psychopathy out there that I also had before learning about the research. The first misconception is that we tend to think that psychopathy is something that is categorical, that someone is either a "psychopath" like ted bundy or a "non-psychopath" like all of us, hopefully. So I was really fascinated to learn about two big misconceptions about psychopathy which also happen to be very common misconceptions generally. 

Research shows that this is not the case. Psychopathy is actually a dimensional construct, so it grades along a continuous spectrum and has multiple intercorrelated personality dimensions. 

And in forensic and clinical samples with incarcerated offenders as participants, the dimensional measure that is used to study psychopathy is the Hare Psychopathy Checklist - Revised, also known as the PCL-R. 

---

## Psychopathy 

**Psychopathic Personality Inventory - Revised** (PPI-R; Lilienfeld & Widows, 2005)

.pull-left[.full-width[.content-box-yellow[**Fearless Dominance** <br> <br> &bull; Stress Immunity <br> <br> &bull; Social Influence <br> <br> &bull; Fearlessness]]] 
.pull-right[.full-width[.content-box-green[**Self-Centered Impulsivity** <br> <br> &bull; Carefree Nonplanfulness <br> <br> &bull; Machiavellian Egocentricity <br> <br> &bull; Blame Externalization <br> <br> &bull; Rebellious Nonconformity]]] 

.pull-left[.full-width[.content-box-purple[**Coldheartedness**]]]

???

However, to study psychopathy in community samples rather than forensic and clinical samples that the PCL-R is more fit for, researchers have developed measures to look at psychopathy in the general community population including the ppi-r and lsrp. and researchers have found that psychopathy is not categorical construct, rather an extreme variation of normal personality dimensions that are distributed continuously in the community population, so to define someone as a psychopath or a non-psychopath would not be appropriate

The PPI-R includes three higher-order dimensions: Fearless Dominance, which includes the subscales of , Self-Centered Impulsivity, which includes the subscales of, and Coldheartedness, which is largely independent of the two other dimensions. 

---

## Psychopathy 

**Levenson Self-Report Psychopathy Scale** (LSRP; Levenson et al., 1995)

.pull-left[.full-width[.content-box-blue[**Interpersonal Facet** <br> <br> *Factor 1*]]]

.pull-left[.full-width[.content-box-yellow[**Affective Facet** <br> <br> *Factor 1*]]]

.pull-right[.full-width[.content-box-green[**Lifestyle Facet** <br> <br> *Factor 2*]]]

.pull-right[.full-width[.content-box-red[**Antisocial Facet** <br> <br> *Factor 2*]]]

???

The LSRP is very similar to the PCL-R in structure

--- 

## Cognitive and emotional processing in psychopathy 

![cleckley](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/cleckley.png)

.small[.left[.footnote[.gray[Cleckley, 1944; Cleckley, 1988; NIH, 1951]]]]

???
In the last few decades, many studies have supported the view that individuals high in psychopathy have emotion recognition deficits. And this emotion recognition deficit is one of the three core characteristics of the Cleckley psychopath, named after Hervey Cleckley, an American psychiatrist who pioneered field of psychopathy and provided this very influential conceptualization of psychopathy. So the Cleckley psychopath was assumed to have a mask of sanity including these three core characteristics, the three being interpersonal charm, affective detachment, and impulse control deficits. Today, we will focusing on this second characteristic, which Cleckley also referred to as a general poverty in affect among individuals high in psychopathy, general being global/pan-situational.

--- 

## Cognitive and emotional processing in psychopathy 

![cleckley](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/cleckley.png)

.small[.left[.footnote[.gray[Cleckley, 1944; Cleckley, 1988; NIH, 1951]]]]

???
In the last few decades, many studies have supported the view that individuals high in psychopathy have emotion recognition deficits. And this emotion recognition deficit is one of the three core characteristics of the Cleckley psychopath, named after Hervey Cleckley, an American psychiatrist who pioneered field of psychopathy and provided this very influential conceptualization of psychopathy. So the Cleckley psychopath was assumed to have a mask of sanity including these three core characteristics, the three being interpersonal charm, affective detachment, and impulse control deficits. Today, we will focusing on this second characteristic, which Cleckley also referred to as a general poverty in affect among individuals high in psychopathy, general being global/pan-situational.

---

## Cognitive and emotional processing in psychopathy 

![ab1](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/ab.png)

.small[.left[.footnote[.gray[Newman, 1987; Patrick, 2018; University of Wisconsin-Madison, n.d.]]]]

???
Another group of researchers disagree with the account of a Cleckley psychopath and argue that individuals high in psychopathy have no problem with recognizing emotions as long as it is goal-relevant. According to Joseph Newman’s attention bottleneck hypothesis of psychopathy, individuals high in psychopathy have a narrower bottleneck for attended information, with emotion being one type of information. So since psychopaths have a narrower bottleneck for perceiving and attending to information, and since we prioritize goal-relevant information to process compared to goal-peripheral information, individuals high in psychopathy have trouble with processing goal-peripheral information in short amounts of time, which could manifest itself as an emotion recognition deficit. 

---

## Cognitive and emotional processing in psychopathy 

![stroop](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/stroop.png)

.small[.left[.footnote[.gray[MacLeod, 2015; Petrovic & Castellanos, 2016]]]]

???

Consistent with the attentional bottleneck hypothesis (Baskin-Sommers et al., 2011), studies utilizing variations of the Stroop task have also shown that psychopathy is associated with reduced Stroop interference (Hiatt et al., 2004; Strohmaier, 2015).


The Stroop effect is a well-validated attentional phenomenon measured by comparing task performance in trials or conditions with Stroop-incongruent stimuli (i.e., simultaneous presentation of one type of stimuli presenting task-relevant information and another type of stimuli presenting task-irrelevant information, creating conflict) and Stroop-congruent stimuli (i.e., simultaneous presentation of two types of stimuli presenting task-relevant information). Therefore, the verbal-facial Stroop effect for the affective feedback employed in this study may interfere with the processing of information from the affective feedback congruence to infer the opponent’s intentions (i.e., by engaging in reverse appraisal). 

---

## Personality Disorders and Interpersonal Dysfunction 

.center[
```{r, echo = FALSE, out.width = "550px"}
knitr::include_graphics("https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/interpersonal.png")
```
]

.small[.left[.footnote[.gray[Mobbs, 2020, Pincus, 2018]]]]

???

Even in community samples, psychopathy is associated with maladaptive outcomes, including aggression and atypical social reward processing, and these maladaptive behavioral outcomes are largely tied to interpersonal dysfunction. 

Significant impairment in interpersonal relations, is central to the conceptualization and maladaptive behavioral outcomes associated with personality disorders, including psychopathy, and it is closely tied to affective processing - especially recognition of emotion as social signals.  

---

## Prisoner's Dilemma 

.center[
```{r, echo = FALSE}
knitr::include_graphics("https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/pd2.png")
```
]

.small[.left[.footnote[.gray[Encyclopædia Britannica, 2010]]]]

???

The PD paradigm, which is based on mathematical game theory, evaluates social cooperation in an interactive two-person task. In each round of the PD, both players make a simultaneous decision to either cooperate or defect; one-shot PD consists of one round, whereas iterated PD consists of more than one round.

And imagine that you are this blue prisoner and your friend is this orange prisoner. So police are interrogating you and your friend, and they said if you confess and your friend doesn’t, you get to walk free while your friend gets 20 years in prison, so you should fess up soon. Because if your friend confesses before you, you are gonna end up in jail for 20 years while your friend walks free. If you guys both confess, you’ll both get 5 years in prison, and if you both stay silent, you each get 1 year, because they won’t have enough evidence. So thinking from your point of view, the best scenario is if you confess first and even though you are betraying your friend, you get to walk free. 

Researchers can also implement a sequential one-shot PD, wherein players would play a series of one round of PD against different players. After player A and player B settle on a decision for the round, the outcome is revealed to both players. There are four possible outcomes in PD: CC (mutual cooperation), DD (mutual defection), CD (cooperation by A and defection by B), and DC (defection by A and cooperation by D). Specific payoffs are assigned for each outcome, and may differ for each payoff matrix as long as it satisfies two conditions: S (payoff for CD) < P (payoff for DD) < R (payoff for CC) < T (payoff for DC), and 2R > S + T (Rapoport & Chammah, 1965). As T > R, a player would always receive a higher payoff by defecting when the opponent cooperates; as P > S, a player would always receive a higher payoff by defecting when the opponent defects. Therefore, as players cannot communicate at any point during the game, participants would always do better by defecting in a one-shot PD. However, achieving the highest payoff by defecting when the opponent cooperates and receives the lowest payoff creates a social dilemma wherein the player would be “betraying” the cooperative opponent in yielding the best outcome for oneself. 
This dilemma is amplified in an iterated PD (spanning multiple rounds) as a player must engage repeatedly with the same opponent (Axelrod & Hamilton, 1981). In an iterated PD, unlike the one-shot PD, the constraint of 2R > S + T ensures that continuous selection of R (mutual cooperation) would be preferred over the alternation between S and T (Rapoport & Chammah, 1965). 

---

## Prisoner's Dilemma (with affective feedback)

.pull-left[.full-width[.content-box-red[**1 - Decision Phase** <br> <br> Participant makes a decision to cooperate or defect]]]

.pull-right[.full-width[.content-box-red[**4 - Decision Phase** <br> <br> Participant makes a decision to select type of affective feedback]]]

???
The PD paradigm has served as a useful framework for exploring the relation between cooperation and individual differences in social preferences as well as attentional and emotional processing and have only grown in precision and usefulness as a growing body of research has incrementally proposed improvements. More specifically, the paradigm allows researchers to model social cooperation in a “social decision cascade” comprising three sequential phases in each round: (1) the decision phase, in which two players make a decision to cooperate or defect, (2) the anticipation phase, in which players wait to view the interdependent outcome, and (3) the feedback phase, in which the outcome is revealed. Structural influences of the paradigm (e.g., arrangement of the payoff matrix, length of the game, etc.) shape participants’ behavioral responses, but so do their psychological characteristics (e.g., individual differences in personality, affect, motives, etc.) and dynamic interaction processes (e.g., appraisal of the opponent’s strategy in relation to one’s own motives, etc.). 

--

.pull-left[.full-width[.content-box-yellow[**2 - Anticipation Phase** <br> <br> Participant anticipates payoff]]]

.pull-right[.full-width[.content-box-yellow[**5 - Anticipation Phase** <br> <br> Participant anticipates opponent's affective feedback]]]

???
The PD paradigm has served as a useful framework for exploring the relation between cooperation and individual differences in social preferences as well as attentional and emotional processing and have only grown in precision and usefulness as a growing body of research has incrementally proposed improvements. More specifically, the paradigm allows researchers to model social cooperation in a “social decision cascade” comprising three sequential phases in each round: (1) the decision phase, in which two players make a decision to cooperate or defect, (2) the anticipation phase, in which players wait to view the interdependent outcome, and (3) the feedback phase, in which the outcome is revealed. Structural influences of the paradigm (e.g., arrangement of the payoff matrix, length of the game, etc.) shape participants’ behavioral responses, but so do their psychological characteristics (e.g., individual differences in personality, affect, motives, etc.) and dynamic interaction processes (e.g., appraisal of the opponent’s strategy in relation to one’s own motives, etc.). 


--

.pull-left[.full-width[.content-box-green[**3 - Feedback Phase** <br> <br> Co-player’s response is revealed and the participant receives feedback regarding payoff]]]

.pull-right[.full-width[.content-box-green[**6 - Feedback Phase** <br> <br> Co-player’s affective reaction is revealed and the participant is able to engage in reverse appraisal]]]

???
The PD paradigm has served as a useful framework for exploring the relation between cooperation and individual differences in social preferences as well as attentional and emotional processing and have only grown in precision and usefulness as a growing body of research has incrementally proposed improvements. More specifically, the paradigm allows researchers to model social cooperation in a “social decision cascade” comprising three sequential phases in each round: (1) the decision phase, in which two players make a decision to cooperate or defect, (2) the anticipation phase, in which players wait to view the interdependent outcome, and (3) the feedback phase, in which the outcome is revealed. Structural influences of the paradigm (e.g., arrangement of the payoff matrix, length of the game, etc.) shape participants’ behavioral responses, but so do their psychological characteristics (e.g., individual differences in personality, affect, motives, etc.) and dynamic interaction processes (e.g., appraisal of the opponent’s strategy in relation to one’s own motives, etc.). 

---

## Reverse Appraisal 

![reverse_appraisal](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/reverse_appraisal.png)

---

### Influence of psychopathy and associated cognitive & affective processes on interdependent decision making


```{r, echo = FALSE, out.width = "800px"}
knitr::include_graphics("https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/coop.png")
```

.small[.left[.footnote[.gray[Van Kleef, 2009]]]]

???

cogni- tion can affect subsequent emotional appraisal, and emotions can affect cognitive decisions 

more hor- monal/emotional areas are activated when cooperating with familiar individuals (cf. emotionally mediated reciprocity (Schino, and Aureli, 2009); and/or attitudinal reciprocity (Brosnan & de Waal, 2000)), whereas more cortical areas involved in mentalizing are activated while cooperating with unfamiliar individuals (cf. calculated reciprocity (de Waal, and Luttrell, 1988). Thus, the employment of these different mechanisms should be seen as a dynamic process that flexibly adjusts to the specific context in which it is needed (West et al., 2011a, b), and where the different components are also not independent— i.e. cogni- tion can affect subsequent emotional appraisal, and emotions can affect cognitive decisions (cf. the componential view of emotions)
 
 
including decision-making behavior in the context of cooperation 

Specifically, the ability to recognize and infer intentions from social signals, such as facial emotional expressions, is critical to the formation and maintenance of interpersonal relations. So to better understand maladaptive behavioral outcomes associated with psychopathy, it is important to look at the relations between individual differences in emotion recognition and psychopathy in an interpersonal context. 

And the Emotion as Social Information model, also known as the EASI model, 

According to this model, observing someone else’s emotional expression in a social interaction can affect the observer’s behavior through two pathways: (1) the inferential pathway, in which the emotional expression of the other individual allows the observer to infer their mental states, like beliefs, desires, and intention, and (2) the affective pathway, where the emotional expression of the other individual elicits affective reactions in the observer. 

And for this project I wanted to specifically look at the interaction of interpersonal and affetive processes in the context of interpersonal decision making, and more specifically, in decision-making for cooperation. 

---

## Current Study 

![pie1](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/Rplot01.png)

---
count: false

## Current Study 


![pie2](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/Rplot02.png)

---
count: false
## Current Study 

![pie3](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/Rplot03.png)

---

## Current Study 

![fert](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/fert.png)

.small[.left[.footnote[.gray[Passarelli et al., 2018]]]]

---

## Current Study 

![F1](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/F1.png)
???

The primary purpose of the present study was to examine the individual and interactive influence of psychopathy, affective feedback congruence, and Stroop interference on cooperation in PD. A secondary goal for the present study was to conduct exploratory analyses on the relation between psychopathy and emotion perception, as well as the influence of psychopathy on the Dunning-Kruger effect for emotion recognition ability should the effect emerge. In the following subsections, the specific aims and hypotheses for the present study are outlined in greater detail. 

Condition 1: Cooperative × Incongruent 
Condition 2: Competitive × Incongruent 
Condition 3: Cooperative × Congruent 
Condition 4: Competitive × Congruent

---

## Current Study 


```{css, echo = F}
.pre {
  height: 30pc;
  overflow-y: scroll;
} 
````

.pre[
```{js, java-code, results = 'hide', error=FALSE, eval=FALSE}
var consent_questions = {
  timeline: [
    {
      type: 'html-keyboard-response', 
      stimulus: ` <p> <strong> Informed Consent Questions</strong> </p>
      <p> Before starting the experiment, we would like to ask you two questions about the informed consent.</p>
      <br> 
      <p> 1. Whom can I contact with questions about the experiment? Please press A, B, or C on your keyboard to answer. </p>
      <br>
      <p> <strong> A.</strong> Dr. Andrew Kazama and the study team</p> 
      <p> <strong> B.</strong> The Chairperson and the Institutional Review Board at Emory University</p>
      <p> <strong> C.</strong> Both A and B</p>`, 
      choices: ['a', 'b', 'c'],
      on_finish: function(data){
      // Score the response as correct or incorrect.
      if(jsPsych.pluginAPI.compareKeys(data.response, "c")){
        data.correct = true;
        } else {
        data.correct = false; 
        }
      }
    },
    {
      type: 'html-keyboard-response',
      stimulus: function(){
        var consent_1 = jsPsych.data.get().last(1).values()[0].correct;
        if(consent_1){
          return "<p> <strong>Correct!</strong> Press any key to continue. </p>"; 
        } else {
          return `<p> <strong>Incorrect.</strong> You can contact either (1) Dr. Andrew Kazama and the study team or (2) The Chairperson and the Institutional Review Board at Emory University. </p>
          <p> Please contact caroline.lee@emory.edu if you have any questions or concerns. </p>
          <p> Press any key to continue.</p>`;  
        }
      }
    },
    {
      type: 'html-keyboard-response', 
      stimulus: `<p> <strong> Informed Consent Questions</strong> </p>
      <p> 2. What will participation in this study require of me? Please press A, B, or C on your keyboard to answer. </p>
      <br>
      <p> <strong> A.</strong> Performing a set of in-person laboratory tasks</p> 
      <p> <strong> B.</strong> Completing an online questionnaire, cognitive task, and an interactive two-player game</p>
      <p> <strong> C.</strong> Both A and B</p>`, 
      choices: ['a', 'b', 'c'],
      on_finish: function(data){
      // Score the response as correct or incorrect.
      if(jsPsych.pluginAPI.compareKeys(data.response, "b")){
        data.correct = true;
        } else {
        data.correct = false; 
        }
      }
    },
    {
      type: 'html-keyboard-response',
      stimulus: function(){
        var consent_2 = jsPsych.data.get().last(1).values()[0].correct;
        if(consent_2){
          return "<p><strong>Correct!</strong> Press any key to continue. </p>"; 
        } else {
          return `<p><strong>Incorrect.</strong> You will be completing an online questionnaire, cognitive task, and an interactive two-player game. </p>
          <p> Please contact caroline.lee@emory.edu if you have any questions or concerns. </p>
          <p> Press any key to continue.</p>`;  
        }
      }
    }
  ]
}

var instr = {
  type: 'html-keyboard-response', 
  stimulus: `<p> <strong> Welcome to the experiment! Press any key to enter.</strong> </p>
            <br> 
            <p> As a reminder, the study will take approximately 15-30 minutes to complete. Please complete the experiment in one sitting without exiting the browser window, as technical issues can complicate resuming the experiment. Thank you for your participation! </strong> </p>`
} 

var demographics = { 
  timeline: [
    {
      type: 'survey-text', 
      questions: [{prompt: 'What is your age?', name: 'Age'}]
    },
    {
      type: 'survey-multi-select', 
      questions: [
        {
          prompt: '<p> Check one or more options that reflect your gender. </p>',
          options: ['Woman', 'Man', 'Non-binary', 'Transgender', 'Intersex', 'Gender non-conforming', 'Not listed', 'Prefer not to respond'],
          name: 'Gender'
        }
      ]
    },
    {
      type: 'survey-multi-select', 
      questions: [
        {
          prompt: `<p> Check one or more options that reflect your race or ethnicity. </strong> </p>`, 
          options: ['White', 'Hispanic, Latino, or Spanish origin', 'Black or African American', 'Asian', 
          'American Indian or Alaska Native', 'Middle Eastern or North African', 'Native Hawaiian or Pacific Islander', 'Another race, ethnicity, or origin', 'Prefer not to respond'],
          name: 'RaceEthnicity'
        }
      ]
    }
  ]
}

var participant_id = {
  type: 'survey-text',
  questions: [{prompt: `<p> What is the <strong>UserID</strong> you were emailed? <strong>Please enter it here</strong>. This will allow us to give you the credit for taking the survey. </p>
  <p> If you were not emailed a UserID, please put N/A. </p>`}]
}

var participant_pcid = {
  type: 'survey-text',
  questions: [{prompt: `<p> If you were not emailed a UserID, <strong>you must make and enter one here</strong>. </p> 
  <p> <strong>You must email this UserID to caroline.lee@emory.edu once you have completed the survey.</strong> This is so we can link your response to your participation. </strong></p> 
  <p> If you were emailed a UserID, please put N/A. </p>`}]
}

var pre_adfes_procedure = {
  timeline: [
    {
      type: 'html-button-response',
      stimulus: 
      `
       <p> In the first section of this study, you will be completing an emotion recognition task. Before starting the task, we would like to ask how you are currently feeling. </p>
       <p> Press <strong>continue </strong> to proceed.</p>
       `,
      choices: ['Continue']
    },
    {
      type: 'image-button-response',
      stimulus: ['SAM_Valence.jpg'],
      stimulus_width: 800,
      prompt: '<p> Please rate how positive or negative the emotion is that you currently feel, ranging from happiness (1) to unhappiness (5). </p>', 
      choices: ['1','2','3','4','5']
    },
    {
      type: 'image-button-response',
      stimulus: ['SAM_Arousal.jpg'],
      stimulus_width: 800,
      prompt: '<p> Please rate how excited or apathetic the emotion is that you currently feel, ranging from excited (1) to calm (5). </p>', 
      choices: ['1','2','3','4','5']
    },
    {
      type: 'video-keyboard-response',
      stimulus: ['OpenLav_Neutral.mp4'],
      choices: 'NO_KEYS',
      autoplay: true,
      width: 800,
      trial_ends_after_video: true,
      prompt: '<p> Please focus on this video. The video is 1 minute long. </p>'
    },
    {
      type: 'image-button-response',
      stimulus: ['SAM_Valence.jpg'],
      stimulus_width: 800,
      prompt: '<p> Please rate how positive or negative the emotion is that you currently feel, ranging from happiness (1) to unhappiness (5). </p>', 
      choices: ['1','2','3','4','5']
    },
    {
      type: 'image-button-response',
      stimulus: ['SAM_Arousal.jpg'],
      stimulus_width: 800,
      prompt: '<p> Please rate how excited or apathetic the emotion is that you currently feel, ranging from excited (1) to calm (5). </p>', 
      choices: ['1','2','3','4','5']
    }
  ]
}

var adfes_test_instr = {
    type: 'html-button-response',
    stimulus: 
    `
    <p>You will now complete the emotion recognition task. </p>
    <p> In this task, you will see some pictures of actors expressing six emotions (fear, anger, surprise, sadness, happiness and disgust). Some of these expressions are subtle. </p> 
    <p> Your task is to guess which emotions they are expressing. In every page of the test you will see two pictures: (1) a neutral expression, which can be used as a reference point, and (2) the emotional expression that you are to guess. </p> 
    <p> When you are ready, press <strong>continue </strong> to begin.</p>
    `,
    choices: ['Continue']
}

var adfes_test_procedure = {
    timeline: [
        {
            type: 'image-button-response',
            stimulus: [jsPsych.timelineVariable('emotion')],
            prompt: '<p> Please select the emotion expressed by the actor. The picture might take a few seconds to load.</p>',
            stimulus_width: 300,
            choices: ['anger', 'disgust', 'fear', 'happiness', 'sadness', 'surprise'],
            button_html: ['<button class="jspsych-btn" style = "position:static">%choice%</button>',
            '<button class="jspsych-btn" style = "position:static">%choice%</button>',
            '<button class="jspsych-btn" style = "position:static">%choice%</button>', 
            '<button class="jspsych-btn" style = "position:static">%choice%</button>',
            '<button class="jspsych-btn" style = "position:static">%choice%</button>', 
            '<button class="jspsych-btn" style = "position:static">%choice%</button>']
        }
    ],
    timeline_variables: [
        { emotion: 'FERT_ARANG2.png' },
        { emotion: 'FERT_ARDIS3.png' },
        { emotion: 'FERT_ARFEA2.png' },
        { emotion: 'FERT_ARHAP2.png' },
        { emotion: 'FERT_ARSAD3.png' },
        { emotion: 'FERT_ARSUR2.png' },
        { emotion: 'FERT_EBANG1.png' },
        { emotion: 'FERT_EBDIS2.png' },
        { emotion: 'FERT_EBFEA3.png' },
        { emotion: 'FERT_EBHAP3.png' },
        { emotion: 'FERT_EBSAD3.png' },
        { emotion: 'FERT_EBSUR3.png' },
        { emotion: 'FERT_FFANG3.png' },
        { emotion: 'FERT_FFDIS2.png' },
        { emotion: 'FERT_FFFEA2.png' },
        { emotion: 'FERT_FFHAP3.png' },
        { emotion: 'FERT_FFSAD1.png' },
        { emotion: 'FERT_FFSUR2.png' },
        { emotion: 'FERT_FGANG2.png' },
        { emotion: 'FERT_FGDIS2.png' },
        { emotion: 'FERT_FGFEA2.png' },
        { emotion: 'FERT_FGHAP3.png' },
        { emotion: 'FERT_FGSAD1.png' },
        { emotion: 'FERT_FGSUR3.png' },
        { emotion: 'FERT_LDANG3.png' },
        { emotion: 'FERT_LDDIS3.png' },
        { emotion: 'FERT_LDFEA3.png' },
        { emotion: 'FERT_LDHAP2.png' },
        { emotion: 'FERT_LDSAD2.png' },
        { emotion: 'FERT_LDSUR2.png' },
        { emotion: 'FERT_MGANG1.png' },
        { emotion: 'FERT_MGDIS2.png' },
        { emotion: 'FERT_MGFEA3.png' },
        { emotion: 'FERT_MGHAP3.png' },
        { emotion: 'FERT_MGSAD2.png' },
        { emotion: 'FERT_MGSUR1.png' }
    ],
    randomize_order: true
}

var adfes_test_dunning = {
    type: 'html-slider-response',
    stimulus: '<p> Please provide an estimate of your performance on this task. </p>',
    require_movement: true, 
    labels: ['0% Correct', '25%', '50%', '75%', '100% Correct']
}

var adfes_procedure = {
  timeline: [pre_adfes_procedure, adfes_test_instr, adfes_test_procedure, adfes_test_dunning]
}

var ipd_intro = {
  type: 'html-button-response',
  stimulus: 
    `
    <p> In this part of the experiment, you will be playing a two-person investment game with another participant who is currently completing this study. In order to guarantee anonymity, you (<strong>Anonymous16</strong>) and the other participant will be providing emotional feedback to each other using a randomly assigned face from the emotion recognition task. </p>
    <p> Press <strong>continue </strong> to proceed to the random character assignment. Your character will be assigned first. </p>
   `,
  choices: ['Continue']
}

var ipd_charac_par_anim = {
  type: 'image-keyboard-response', 
  stimulus: 'loading.gif',
  stimulus_width: 200,
  prompt: '<p> Selecting a random face for your character ... </p>',
  trial_duration: 10000, 
  render_on_canvas: false,
  choices: jsPsych.NO_KEYS
}

var ipd_charac_par = {
  type: 'image-button-response', 
  stimulus: 'PAR_neutral.png',  
  stimulus_width: 200,
  prompt: `<p> This will be the facial character for you (<strong>Anonymous16</strong>) throughout this task. </p>
   <p> Press <strong>continue </strong> to proceed. </p>`,
  choices: ['Continue']
}

var pre_ipd_procedure = {
  timeline: [ipd_intro, ipd_charac_par_anim, ipd_charac_par]
}

var attention_check = {
  type: 'html-button-response',
  choices: ["<img src='chocolate.png' width = '140' height ='100'>", "<img src='strawberry.png' width ='140' height ='100'>", "<img src='vanilla.png' width = '140' height ='100'>", "<img src='cookies_cream.png' width = '140' height ='100'>"],
  stimulus: `<p> Please disregard the question below and click on 'vanilla'. This is just to screen out random clicking. </p> 
    <br> 
    <p> What is your favorite ice cream flavor? </p>`
} 

var ipd_procedure = {
    timeline: [
        {
          type: 'image-keyboard-response',
          stimulus: 'loading.gif',
          stimulus_width: 200,
          prompt: '<p> Please wait while we connect you to another participant... </p>',
          trial_duration: 10000, 
          render_on_canvas: false,
          choices: jsPsych.NO_KEYS
        },
        { 
          type: 'html-button-response',
          stimulus: `<p> Your ID is <strong> Anonymous16</strong>. The other participant's ID is <strong> Anonymous35 </strong>.</p>
            <p> Press <strong>continue </strong> to proceed.</p>`, 
          choices: ['Continue']
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'loading.gif',
          stimulus_width: 200,
          prompt: '<p> Waiting for Anonymous35 to enter the room... </p>',
          trial_duration: 10000, 
          render_on_canvas: false,
          choices: jsPsych.NO_KEYS
        },
        {
          type: 'image-button-response', 
          stimulus: 'A35_neutral.png', 
          stimulus_width: 200,
          prompt: `<p> This is the facial character for the other participant (<strong>Anonymous35</strong>). </p>
             <p> Press <strong>continue </strong> to proceed. </p>`,
          choices: ['Continue']
        },
        {
          type: 'image-button-response', 
          stimulus: 'ipd_matrix_A35.png', 
          stimulus_width: 350, 
          prompt: `<p style = "font-size: 15px"><strong>Please read the following instructions carefully before proceeding. The trial will only begin after both participants click continue.</strong></p>
              <p style = "font-size: 15px">In this investment game, you and the other player (A35) have two options for investment: project <strong><span style="color: rgb(65, 168, 95);">GREEN</span></strong> 
              and project <strong><span style="color: rgb(41, 105, 176);">BLUE</span></strong>. You will be playing 20 rounds in total and each player will have the chance to earn points (converted to raffle entries for a $50 Amazon eGift card drawing).  
              The points for each round are determined by what you and A35 invest in for each round. 
              For each round, if you invest in <strong><span style="color: rgb(65, 168, 95);"> GREEN</span></strong> and A35 invests in <strong><span style="color: rgb(65, 168, 95);">GREEN</span></strong>, both you each get 5 points. 
              If you invest in <strong><span style="color: rgb(65, 168, 95);"> GREEN</span></strong> and A35 invests in <strong><span style="color: rgb(41, 105, 176);">BLUE</span></strong>, you get 2 points and A35 gets 7 points. 
              If you invest in <strong><span style="color: rgb(41, 105, 176);">BLUE</span></strong> and A35 invests in <strong><span style="color: rgb(65, 168, 95);">GREEN</span></strong>, you get 7 points and A35 gets 2 points. If you invest in <strong>
              <span style="color: rgb(41, 105, 176);">BLUE</span></strong> and A35 invests in <strong><span style="color: rgb(41, 105, 176);">BLUE</span></strong>, you each get 3 points. <strong> There is no 
              need to remember this </strong> - the matrix will remain on the screen throughout the full duration of the game for reference. Press <strong> continue </strong> to proceed. </p>`,
          choices: ['Continue'], 
          button_html: ['<button class="jspsych-btn" style = "position:fixed; bottom: 80px">%choice%</button>']
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'loading.gif',
          stimulus_width: 200,
          prompt: '<p> Waiting for Anonymous35 to enter the room... </p>',
          trial_duration: 5000, 
          render_on_canvas: false,
          choices: jsPsych.NO_KEYS
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'round1_matrix_c0.png',
          stimulus_width: 500,
          prompt: '<p> Please press <strong>G</strong> on the keyboard to invest in <strong>GREEN</strong> and <strong>B</strong> on the keyboard to invest in <strong>BLUE</strong>.</p>', 
          choices: ['g','b'],
          on_finish: function(data){
            // Score the response as correct or incorrect.
            if(jsPsych.pluginAPI.compareKeys(data.response, 'g')){
              data.correct = true;
            } else {
              data.correct = false; 
            }
          }
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'loading.gif',
          stimulus_width: 200,
          prompt: '<p> Waiting for Anonymous35 to invest... </p>',
          trial_duration: 7000, 
          render_on_canvas: false,
          choices: jsPsych.NO_KEYS
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
            var round1_coop_1 = jsPsych.data.get().last(2).values()[0].correct;
            if(round1_coop_1){
              return jsPsych.timelineVariable('counter_green_coop_r1_A35');
            } else {
              return jsPsych.timelineVariable('counter_blue_coop_r1_A35');
            } 
          }
        },
        {
          type: 'html-keyboard-response', 
          stimulus: '',
          choices: jsPsych.ALL_KEYS,
          prompt: function() {
            if(CONDITION == 1 || CONDITION == 2) {
              return `<p> You will now have an opportunity to provide feedback to the Anonymous35 regarding how the outcome made you feel. Anonymous35 will receive your feedback and provide feedback as well. </p>
                   <p> Press any key to continue. </p>`}; 
            if(CONDITION == 3 || CONDITION == 4) { 
              return `<p> You will now have an opportunity to provide feedback to the Anonymous35 regarding how the outcome made you feel. Anonymous35 will receive your feedback and provide feedback as well. </p>
                   <p> Please focus on the <strong> FACIAL EMOTIONAL EXPRESSIONS </strong>, as you will use the facial emotional expressions to provide feedback. Do <strong> NOT </strong> focus on the color screens, 
                   as they are meaningless and will <strong> NOT </strong> be used for feedback. </p>
                   <p> Press any key to continue. </p>`}
          }
        },
        {
          type: 'html-button-response',
          choices: function() { 
            if(CONDITION == 1 || CONDITION == 2) {
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}; 
            if(CONDITION == 3 || CONDITION == 4) { 
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}
          }, 
          stimulus: function(){
            var round1_coop_2 = jsPsych.data.get().last(4).values()[0].correct;
            if(round1_coop_2) {
              return jsPsych.timelineVariable('par_gg_res_A35');
            } else {
              return jsPsych.timelineVariable('par_bg_res_A35');
            }
          }
        },
        { // Condition 1 = FAC CO; Condition 2 = FAC CP; Condition 3 = VER CO; Condition 4 = VER CP 
          type: 'html-keyboard-response',
          stimulus: function(){
            var round1_coop_3 = jsPsych.data.get().last(5).values()[0].correct;
            if(round1_coop_3 && CONDITION == 1) {
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
            };
            if(round1_coop_3 && CONDITION == 2) {
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
            };
            if(round1_coop_3 && CONDITION == 3) {
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C3_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
            }; 
            if(round1_coop_3 && CONDITION == 4) {
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C4_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C4_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
            }
          }
        }, 
        { // Condition 1 = A35 CO; Condition 2 = A35 CP; Condition 3 = A17 CO; Condition 4 = A17 CP 
          type: 'html-slider-response',
          stimulus: function(){
            var round1_coop_4 = jsPsych.data.get().last(6).values()[0].correct;
            if(round1_coop_4 && CONDITION == 1) {
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C1.png" height="200"></img>`;
              } else {
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C1.png" height="200"></img>`;
            };
            if(round1_coop_4 && CONDITION == 2) {
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C2.png" height="200"></img>`;
              } else {
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C2.png" height="200"></img>`;
            };
            if(round1_coop_4 && CONDITION == 3) {
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C3_StroopANG.png" height="200"></img>`;
              } else {
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C3_StroopNEU.png" height="200"></img>`;
            };
            if(round1_coop_4 && CONDITION == 4) {
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C4_StroopANG.png" height="200"></img>`;
              } else {
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C4_StroopNEU.png" height="200"></img>`;
            }
          },
          labels: ['Likely BLUE', 'Likely GREEN']
        },   
        {
          type: 'image-keyboard-response',
          stimulus: 'round2_matrix_c0.png',
          stimulus_width: 500,
          prompt: '<p> Please press <strong>G</strong> on the keyboard to invest in <strong>GREEN</strong> and <strong>B</strong> on the keyboard to invest in <strong>BLUE</strong>.</p>', 
          choices: ['g','b'],
          on_finish: function(data){
            // Score the response as correct or incorrect.
            if(jsPsych.pluginAPI.compareKeys(data.response, "g")){
              data.correct = true;
            } else {
              data.correct = false; 
            }
          }
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'loading.gif',
          stimulus_width: 200,
          prompt: '<p> Waiting for Anonymous35 to invest... </p>',
          trial_duration: 10000, 
          render_on_canvas: false,
          choices: jsPsych.NO_KEYS
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data1_1 = jsPsych.data.get().last(9).values()[0];
            var data2_1 = jsPsych.data.get().last(2).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data2_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data1_1.response, 'g')){
            return jsPsych.timelineVariable('counter_green_coop_r2_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data2_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data1_1.response, 'b')){
              return jsPsych.timelineVariable('counter_green_defe_r2_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data2_1.response, 'b') && jsPsych.pluginAPI.compareKeys(data1_1.response, 'g')){
              return jsPsych.timelineVariable('counter_blue_coop_r2_A35');
            } else {
              return jsPsych.timelineVariable('counter_blue_defe_r2_A35');
            }
          }
        },
        {
          type: 'html-button-response',
          choices: function() { 
            if(CONDITION == 1 || CONDITION == 2) {
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}; 
            if(CONDITION == 3 || CONDITION == 4) { 
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}
          }, 
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data1_2 = jsPsych.data.get().last(10).values()[0];
            var data2_2 = jsPsych.data.get().last(3).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data2_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data1_2.response, 'g')){
            return jsPsych.timelineVariable('par_gg_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data2_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data1_2.response, 'b')){
              return jsPsych.timelineVariable('par_gg_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data2_2.response, 'b') && jsPsych.pluginAPI.compareKeys(data1_2.response, 'g')){
              return jsPsych.timelineVariable('par_gg_res_A35');
            } else {
              return jsPsych.timelineVariable('par_gg_res_A35');
            }
          }
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data1_3 = jsPsych.data.get().last(11).values()[0];
            var data2_3 = jsPsych.data.get().last(4).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data2_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data1_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data2_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data1_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data2_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data1_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data2_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data1_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data2_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data1_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data2_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data1_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            }; 
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data2_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data1_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data2_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data1_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C3_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data2_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data1_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C3_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C3_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data2_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data1_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C4_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data2_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data1_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C4_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data2_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data1_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C4_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C4_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            }
          }
        },
        {
          type: 'html-slider-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data1_4 = jsPsych.data.get().last(12).values()[0];
            var data2_4 = jsPsych.data.get().last(5).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data2_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data1_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data2_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data1_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data2_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data1_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C1.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C1.png" height="200"></img>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data2_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data1_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data2_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data1_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data2_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data1_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C2.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C2.png" height="200"></img>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data2_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data1_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C3_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data2_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data1_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C3_StroopHAP.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data2_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data1_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C3_StroopNEU.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C3_StroopREG.png" height="200"></img>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data2_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data1_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C4_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data2_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data1_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C4_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data2_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data1_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C4_StroopREG.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C4_StroopHAP.png" height="200"></img>`;
              }
            }
          },
          labels: ['Likely BLUE', 'Likely GREEN']
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'round3_matrix_c0.png',
          stimulus_width: 500,
          prompt: '<p> Please press <strong>G</strong> on the keyboard to invest in <strong>GREEN</strong> and <strong>B</strong> on the keyboard to invest in <strong>BLUE</strong>.</p>', 
          choices: ['g','b'],
          on_finish: function(data){
            // Score the response as correct or incorrect.
            if(jsPsych.pluginAPI.compareKeys(data.response, "g")){
              data.correct = true;
            } else {
              data.correct = false; 
            }
          }
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'loading.gif',
          stimulus_width: 200,
          prompt: '<p> Waiting for Anonymous35 to invest... </p>',
          trial_duration: 8000, 
          render_on_canvas: false,
          choices: jsPsych.NO_KEYS
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data3_1 = jsPsych.data.get().last(8).values()[0];
            var data4_1 = jsPsych.data.get().last(2).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data4_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data3_1.response, 'g')){
            return jsPsych.timelineVariable('counter_green_coop_r3_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data4_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data3_1.response, 'b')){
              return jsPsych.timelineVariable('counter_green_defe_r3_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data4_1.response, 'b') && jsPsych.pluginAPI.compareKeys(data3_1.response, 'g')){
              return jsPsych.timelineVariable('counter_blue_coop_r3_A35');
            } else {
              return jsPsych.timelineVariable('counter_blue_defe_r3_A35');
            }
          }
        },
        {
          type: 'html-button-response',
          choices: function() { 
            if(CONDITION == 1 || CONDITION == 2) {
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}; 
            if(CONDITION == 3 || CONDITION == 4) { 
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}
          }, 
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data3_2 = jsPsych.data.get().last(9).values()[0];
            var data4_2 = jsPsych.data.get().last(3).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data4_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data3_2.response, 'g')){
            return jsPsych.timelineVariable('par_gg_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data4_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data3_2.response, 'b')){
              return jsPsych.timelineVariable('par_gb_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data4_2.response, 'b') && jsPsych.pluginAPI.compareKeys(data3_2.response, 'g')){
              return jsPsych.timelineVariable('par_bg_res_A35');
            } else {
              return jsPsych.timelineVariable('par_bb_res_A35');
            }
          }
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data3_3 = jsPsych.data.get().last(10).values()[0];
            var data4_3 = jsPsych.data.get().last(4).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data4_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data3_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data4_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data3_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data4_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data3_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data4_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data3_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data4_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data3_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data4_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data3_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data4_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data3_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C3_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data4_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data3_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data4_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data3_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C3_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C3_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data4_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data3_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C4_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data4_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data3_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C4_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data4_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data3_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C4_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C4_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            }
          }
        },
        {
          type: 'html-slider-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data3_4 = jsPsych.data.get().last(11).values()[0];
            var data4_4 = jsPsych.data.get().last(5).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data4_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data3_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data4_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data3_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data4_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data3_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C1.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C1.png" height="200"></img>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data4_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data3_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data4_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data3_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data4_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data3_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C2.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C2.png" height="200"></img>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data4_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data3_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C3_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data4_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data3_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C3_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data4_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data3_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C3_StroopHAP.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C3_StroopREG.png" height="200"></img>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data4_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data3_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C4_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data4_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data3_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C4_StroopREG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data4_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data3_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C4_StroopHAP.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C4_StroopREG.png" height="200"></img>`;
              }
            }
          },
          labels: ['Likely BLUE', 'Likely GREEN']
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'round4_matrix_c0.png',
          stimulus_width: 500,
          prompt: '<p> Please press <strong>G</strong> on the keyboard to invest in <strong>GREEN</strong> and <strong>B</strong> on the keyboard to invest in <strong>BLUE</strong>.</p>', 
          choices: ['g','b'],
          on_finish: function(data){
            // Score the response as correct or incorrect.
            if(jsPsych.pluginAPI.compareKeys(data.response, "g")){
              data.correct = true;
            } else {
              data.correct = false; 
            }
          }
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'loading.gif',
          stimulus_width: 200,
          prompt: '<p> Waiting for Anonymous35 to invest... </p>',
          trial_duration: 6500, 
          render_on_canvas: false,
          choices: jsPsych.NO_KEYS
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data5_1 = jsPsych.data.get().last(8).values()[0];
            var data6_1 = jsPsych.data.get().last(2).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data6_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data5_1.response, 'g')){
            return jsPsych.timelineVariable('counter_green_coop_r4_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data6_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data5_1.response, 'b')){
              return jsPsych.timelineVariable('counter_green_defe_r4_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data6_1.response, 'b') && jsPsych.pluginAPI.compareKeys(data5_1.response, 'g')){
              return jsPsych.timelineVariable('counter_blue_coop_r4_A35');
            } else {
              return jsPsych.timelineVariable('counter_blue_defe_r4_A35');
            }
          }
        },
        {
          type: 'html-button-response',
          choices: function() { 
            if(CONDITION == 1 || CONDITION == 2) {
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}; 
            if(CONDITION == 3 || CONDITION == 4) { 
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}
          },  
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data5_2 = jsPsych.data.get().last(9).values()[0];
            var data6_2 = jsPsych.data.get().last(3).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data6_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data5_2.response, 'g')){
            return jsPsych.timelineVariable('par_gg_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data6_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data5_2.response, 'b')){
              return jsPsych.timelineVariable('par_gb_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data6_2.response, 'b') && jsPsych.pluginAPI.compareKeys(data5_2.response, 'g')){
              return jsPsych.timelineVariable('par_bg_res_A35');
            } else {
              return jsPsych.timelineVariable('par_bb_res_A35');
            }
          }
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data5_3 = jsPsych.data.get().last(10).values()[0];
            var data6_3 = jsPsych.data.get().last(4).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data6_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data5_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data6_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data5_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data6_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data5_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data6_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data5_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data6_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data5_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data6_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data5_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data6_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data5_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C3_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data6_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data5_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data6_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data5_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C3_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C3_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data6_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data5_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C4_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data6_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data5_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C4_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data6_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data5_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C4_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C4_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            }
          }
        },
        {
          type: 'html-slider-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data5_4 = jsPsych.data.get().last(11).values()[0];
            var data6_4 = jsPsych.data.get().last(5).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data6_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data5_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data6_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data5_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data6_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data5_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C1.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C1.png" height="200"></img>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data6_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data5_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data6_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data5_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data6_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data5_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C2.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C2.png" height="200"></img>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data6_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data5_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C3_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data6_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data5_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C3_StroopHAP.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data6_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data5_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C3_StroopHAP.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C3_StroopREG.png" height="200"></img>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data6_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data5_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C4_StroopNEU.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data6_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data5_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C4_StroopREG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data6_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data5_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C4_StroopHAP.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C4_StroopANG.png" height="200"></img>`;
              }
            } 
          },
          labels: ['Likely BLUE', 'Likely GREEN']
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'round5_matrix_c0.png',
          stimulus_width: 500,
          prompt: '<p> Please press <strong>G</strong> on the keyboard to invest in <strong>GREEN</strong> and <strong>B</strong> on the keyboard to invest in <strong>BLUE</strong>.</p>', 
          choices: ['g','b'],
          on_finish: function(data){
            // Score the response as correct or incorrect.
            if(jsPsych.pluginAPI.compareKeys(data.response, "g")){
              data.correct = true;
            } else {
              data.correct = false; 
            }
          }
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'loading.gif',
          stimulus_width: 200,
          prompt: '<p> Waiting for Anonymous35 to invest... </p>',
          trial_duration: 9000, 
          render_on_canvas: false,
          choices: jsPsych.NO_KEYS
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data7_1 = jsPsych.data.get().last(8).values()[0];
            var data8_1 = jsPsych.data.get().last(2).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data8_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data7_1.response, 'g')){
            return jsPsych.timelineVariable('counter_green_coop_r5_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data8_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data7_1.response, 'b')){
              return jsPsych.timelineVariable('counter_green_defe_r5_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data8_1.response, 'b') && jsPsych.pluginAPI.compareKeys(data7_1.response, 'g')){
              return jsPsych.timelineVariable('counter_blue_coop_r5_A35');
            } else {
              return jsPsych.timelineVariable('counter_blue_defe_r5_A35');
            }
          }
        },
        {
          type: 'html-button-response',
          choices: function() { 
            if(CONDITION == 1 || CONDITION == 2) {
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}; 
            if(CONDITION == 3 || CONDITION == 4) { 
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}
          },
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data7_2 = jsPsych.data.get().last(9).values()[0];
            var data8_2 = jsPsych.data.get().last(3).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data8_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data7_2.response, 'g')){
            return jsPsych.timelineVariable('par_gg_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data8_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data7_2.response, 'b')){
              return jsPsych.timelineVariable('par_gb_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data8_2.response, 'b') && jsPsych.pluginAPI.compareKeys(data7_2.response, 'g')){
              return jsPsych.timelineVariable('par_bg_res_A35');
            } else {
              return jsPsych.timelineVariable('par_bb_res_A35');
            }
          }
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data7_3 = jsPsych.data.get().last(10).values()[0];
            var data8_3 = jsPsych.data.get().last(4).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data8_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data7_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data8_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data7_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data8_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data7_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data8_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data7_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data8_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data7_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data8_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data7_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data8_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data7_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C3_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data8_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data7_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data8_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data7_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C3_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data8_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data7_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C4_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data8_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data7_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C4_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data8_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data7_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C4_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C4_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            }
          }
        },
        {
          type: 'html-slider-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data7_4 = jsPsych.data.get().last(11).values()[0];
            var data8_4 = jsPsych.data.get().last(5).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data8_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data7_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data8_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data7_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data8_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data7_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C1.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C1.png" height="200"></img>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data8_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data7_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data8_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data7_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data8_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data7_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C2.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C2.png" height="200"></img>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data8_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data7_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C3_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data8_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data7_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C3_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data8_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data7_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C3_StroopREG.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C3_StroopHAP.png" height="200"></img>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data8_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data7_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C4_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data8_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data7_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C4_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data8_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data7_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C4_StroopREG.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C4_StroopANG.png" height="200"></img>`;
              }
            }
          },
          labels: ['Likely BLUE', 'Likely GREEN']
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'round6_matrix_c0.png',
          stimulus_width: 500,
          prompt: '<p> Please press <strong>G</strong> on the keyboard to invest in <strong>GREEN</strong> and <strong>B</strong> on the keyboard to invest in <strong>BLUE</strong>.</p>', 
          choices: ['g','b'],
          on_finish: function(data){
            // Score the response as correct or incorrect.
            if(jsPsych.pluginAPI.compareKeys(data.response, "g")){
              data.correct = true;
            } else {
              data.correct = false; 
            }
          }
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'loading.gif',
          stimulus_width: 200,
          prompt: '<p> Waiting for Anonymous35 to invest... </p>',
          trial_duration: 10000, 
          render_on_canvas: false,
          choices: jsPsych.NO_KEYS
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data9_1 = jsPsych.data.get().last(8).values()[0];
            var data10_1 = jsPsych.data.get().last(2).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data10_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data9_1.response, 'g')){
            return jsPsych.timelineVariable('counter_green_coop_r6_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data10_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data9_1.response, 'b')){
              return jsPsych.timelineVariable('counter_green_defe_r6_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data10_1.response, 'b') && jsPsych.pluginAPI.compareKeys(data9_1.response, 'g')){
              return jsPsych.timelineVariable('counter_blue_coop_r6_A35');
            } else {
              return jsPsych.timelineVariable('counter_blue_defe_r6_A35');
            }
          }
        },
        {
          type: 'html-button-response',
          choices: function() { 
            if(CONDITION == 1 || CONDITION == 2) {
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}; 
            if(CONDITION == 3 || CONDITION == 4) { 
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}
          }, 
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data9_2 = jsPsych.data.get().last(9).values()[0];
            var data10_2 = jsPsych.data.get().last(3).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data10_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data9_2.response, 'g')){
            return jsPsych.timelineVariable('par_gg_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data10_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data9_2.response, 'b')){
              return jsPsych.timelineVariable('par_gb_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data10_2.response, 'b') && jsPsych.pluginAPI.compareKeys(data9_2.response, 'g')){
              return jsPsych.timelineVariable('par_bg_res_A35');
            } else {
              return jsPsych.timelineVariable('par_bb_res_A35');
            }
          }
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data9_3 = jsPsych.data.get().last(10).values()[0];
            var data10_3 = jsPsych.data.get().last(4).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data10_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data9_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data10_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data9_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data10_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data9_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data10_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data9_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data10_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data9_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data10_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data9_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data10_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data9_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data10_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data9_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data10_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data9_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C3_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data10_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data9_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C4_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data10_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data9_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C4_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data10_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data9_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C4_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C4_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            }
          }
        },
        {
          type: 'html-slider-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data9_4 = jsPsych.data.get().last(11).values()[0];
            var data10_4 = jsPsych.data.get().last(5).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data10_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data9_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data10_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data9_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data10_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data9_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C1.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C1.png" height="200"></img>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data10_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data9_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data10_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data9_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data10_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data9_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C2.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C2.png" height="200"></img>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data10_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data9_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C3_StroopREG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data10_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data9_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C3_StroopHAP.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data10_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data9_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C3_StroopHAP.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C3_StroopHAP.png" height="200"></img>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data10_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data9_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C4_StroopNEU.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data10_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data9_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C4_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data10_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data9_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C4_StroopNEU.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C4_StroopANG.png" height="200"></img>`;
              }
            }
          },
          labels: ['Likely BLUE', 'Likely GREEN']
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'round7_matrix_c0.png',
          stimulus_width: 500,
          prompt: '<p> Please press <strong>G</strong> on the keyboard to invest in <strong>GREEN</strong> and <strong>B</strong> on the keyboard to invest in <strong>BLUE</strong>.</p>', 
          choices: ['g','b'],
          on_finish: function(data){
            // Score the response as correct or incorrect.
            if(jsPsych.pluginAPI.compareKeys(data.response, "g")){
              data.correct = true;
            } else {
              data.correct = false; 
            }
          }
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'loading.gif',
          stimulus_width: 200,
          prompt: '<p> Waiting for Anonymous35 to invest... </p>',
          trial_duration: 10000, 
          render_on_canvas: false,
          choices: jsPsych.NO_KEYS
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data11_1 = jsPsych.data.get().last(8).values()[0];
            var data12_1 = jsPsych.data.get().last(2).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data12_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data11_1.response, 'g')){
            return jsPsych.timelineVariable('counter_green_coop_r7_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data12_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data11_1.response, 'b')){
              return jsPsych.timelineVariable('counter_green_defe_r7_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data12_1.response, 'b') && jsPsych.pluginAPI.compareKeys(data11_1.response, 'g')){
              return jsPsych.timelineVariable('counter_blue_coop_r7_A35');
            } else {
              return jsPsych.timelineVariable('counter_blue_defe_r7_A35');
            }
          }
        },
        {
          type: 'html-button-response',
          choices: function() { 
            if(CONDITION == 1 || CONDITION == 2) {
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}; 
            if(CONDITION == 3 || CONDITION == 4) { 
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}
          }, 
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data11_2 = jsPsych.data.get().last(9).values()[0];
            var data12_2 = jsPsych.data.get().last(3).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data12_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data11_2.response, 'g')){
            return jsPsych.timelineVariable('par_gg_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data12_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data11_2.response, 'b')){
              return jsPsych.timelineVariable('par_gb_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data12_2.response, 'b') && jsPsych.pluginAPI.compareKeys(data11_2.response, 'g')){
              return jsPsych.timelineVariable('par_bg_res_A35');
            } else {
              return jsPsych.timelineVariable('par_bb_res_A35');
            }
          }
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data11_3 = jsPsych.data.get().last(10).values()[0];
            var data12_3 = jsPsych.data.get().last(4).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data12_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data11_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data12_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data11_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data12_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data11_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data12_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data11_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data12_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data11_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data12_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data11_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data12_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data11_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data12_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data11_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data12_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data11_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C3_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data12_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data11_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C4_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data12_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data11_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C4_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data12_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data11_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C4_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C4_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            }
          }
        },
        {
          type: 'html-slider-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data11_4 = jsPsych.data.get().last(11).values()[0];
            var data12_4 = jsPsych.data.get().last(5).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data12_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data11_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data12_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data11_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data12_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data11_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C1.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C1.png" height="200"></img>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data12_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data11_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data12_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data11_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data12_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data11_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C2.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C2.png" height="200"></img>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data12_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data11_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C3_StroopREG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data12_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data11_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C3_StroopHAP.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data12_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data11_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C3_StroopHAP.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C3_StroopHAP.png" height="200"></img>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data12_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data11_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C4_StroopNEU.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data12_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data11_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C4_StroopNEU.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data12_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data11_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C4_StroopHAP.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C4_StroopANG.png" height="200"></img>`;
              }
            }
          },
          labels: ['Likely BLUE', 'Likely GREEN']
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'round8_matrix_c0.png',
          stimulus_width: 500,
          prompt: '<p> Please press <strong>G</strong> on the keyboard to invest in <strong>GREEN</strong> and <strong>B</strong> on the keyboard to invest in <strong>BLUE</strong>.</p>', 
          choices: ['g','b'],
          on_finish: function(data){
            // Score the response as correct or incorrect.
            if(jsPsych.pluginAPI.compareKeys(data.response, "g")){
              data.correct = true;
            } else {
              data.correct = false; 
            }
          }
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'loading.gif',
          stimulus_width: 200,
          prompt: '<p> Waiting for Anonymous35 to invest... </p>',
          trial_duration: 6500, 
          render_on_canvas: false,
          choices: jsPsych.NO_KEYS
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data13_1 = jsPsych.data.get().last(8).values()[0];
            var data14_1 = jsPsych.data.get().last(2).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data14_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data13_1.response, 'g')){
            return jsPsych.timelineVariable('counter_green_coop_r8_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data14_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data13_1.response, 'b')){
              return jsPsych.timelineVariable('counter_green_defe_r8_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data14_1.response, 'b') && jsPsych.pluginAPI.compareKeys(data13_1.response, 'g')){
              return jsPsych.timelineVariable('counter_blue_coop_r8_A35');
            } else {
              return jsPsych.timelineVariable('counter_blue_defe_r8_A35');
            }
          }
        },
        {
          type: 'html-button-response',
          choices: function() { 
            if(CONDITION == 1 || CONDITION == 2) {
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}; 
            if(CONDITION == 3 || CONDITION == 4) { 
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}
          }, 
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data13_2 = jsPsych.data.get().last(9).values()[0];
            var data14_2 = jsPsych.data.get().last(3).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data13_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data14_2.response, 'g')){
            return jsPsych.timelineVariable('par_gg_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data13_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data14_2.response, 'b')){
              return jsPsych.timelineVariable('par_gb_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data13_2.response, 'b') && jsPsych.pluginAPI.compareKeys(data14_2.response, 'g')){
              return jsPsych.timelineVariable('par_bg_res_A35');
            } else {
              return jsPsych.timelineVariable('par_bb_res_A35');
            }
          }
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data13_3 = jsPsych.data.get().last(10).values()[0];
            var data14_3 = jsPsych.data.get().last(4).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data14_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data13_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data14_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data13_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data14_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data13_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data14_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data13_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data14_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data13_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data14_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data13_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data14_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data13_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data14_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data13_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data14_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data13_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C3_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data14_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data13_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C4_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data14_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data13_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C4_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data14_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data13_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C4_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C4_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            }
          }
        },
        {
          type: 'html-slider-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data13_4 = jsPsych.data.get().last(11).values()[0];
            var data14_4 = jsPsych.data.get().last(5).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data14_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data13_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data14_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data13_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data14_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data13_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C1.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C1.png" height="200"></img>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data14_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data13_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data14_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data13_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data14_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data13_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C2.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C2.png" height="200"></img>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data14_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data13_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C3_StroopREG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data14_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data13_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C3_StroopHAP.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data14_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data13_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C3_StroopHAP.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C3_StroopHAP.png" height="200"></img>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data14_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data13_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C4_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data14_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data13_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C4_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data14_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data13_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C4_StroopNEU.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C4_StroopREG.png" height="200"></img>`;
              }
            }
          },
          labels: ['Likely BLUE', 'Likely GREEN']
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'round9_matrix_c0.png',
          stimulus_width: 500,
          prompt: '<p> Please press <strong>G</strong> on the keyboard to invest in <strong>GREEN</strong> and <strong>B</strong> on the keyboard to invest in <strong>BLUE</strong>.</p>', 
          choices: ['g','b'],
          on_finish: function(data){
            // Score the response as correct or incorrect.
            if(jsPsych.pluginAPI.compareKeys(data.response, "g")){
              data.correct = true;
            } else {
              data.correct = false; 
            }
          }
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'loading.gif',
          stimulus_width: 200,
          prompt: '<p> Waiting for Anonymous35 to invest... </p>',
          trial_duration: 10000, 
          render_on_canvas: false,
          choices: jsPsych.NO_KEYS
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data15_1 = jsPsych.data.get().last(8).values()[0];
            var data16_1 = jsPsych.data.get().last(2).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data16_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data15_1.response, 'g')){
            return jsPsych.timelineVariable('counter_green_coop_r9_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data16_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data15_1.response, 'b')){
              return jsPsych.timelineVariable('counter_green_defe_r9_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data16_1.response, 'b') && jsPsych.pluginAPI.compareKeys(data15_1.response, 'g')){
              return jsPsych.timelineVariable('counter_blue_coop_r9_A35');
            } else {
              return jsPsych.timelineVariable('counter_blue_defe_r9_A35');
            }
          }
        },
        {
          type: 'html-button-response',
          choices: function() { 
            if(CONDITION == 1 || CONDITION == 2) {
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}; 
            if(CONDITION == 3 || CONDITION == 4) { 
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}
          }, 
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data15_2 = jsPsych.data.get().last(9).values()[0];
            var data16_2 = jsPsych.data.get().last(3).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data16_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data15_2.response, 'g')){
            return jsPsych.timelineVariable('par_gg_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data16_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data15_2.response, 'b')){
              return jsPsych.timelineVariable('par_gb_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data16_2.response, 'b') && jsPsych.pluginAPI.compareKeys(data15_2.response, 'g')){
              return jsPsych.timelineVariable('par_bg_res_A35');
            } else {
              return jsPsych.timelineVariable('par_bb_res_A35');
            }
          }
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data15_3 = jsPsych.data.get().last(10).values()[0];
            var data16_3 = jsPsych.data.get().last(4).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data16_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data15_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data16_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data15_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data16_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data15_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data16_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data15_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data16_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data15_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data16_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data15_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data16_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data15_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data16_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data15_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C3_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data16_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data15_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C3_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data16_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data15_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C4_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data16_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data15_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C4_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data16_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data15_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C4_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C4_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            }
          }
        },
        {
          type: 'html-slider-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data15_4 = jsPsych.data.get().last(11).values()[0];
            var data16_4 = jsPsych.data.get().last(5).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data16_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data15_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data16_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data15_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data16_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data15_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C1.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C1.png" height="200"></img>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data16_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data15_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data16_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data15_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data16_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data15_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C2.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C2.png" height="200"></img>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data16_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data15_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C3_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data16_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data15_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C3_StroopNEU.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data16_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data15_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C3_StroopHAP.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C3_StroopHAP.png" height="200"></img>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data16_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data15_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C4_StroopNEU.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data16_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data15_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C4_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data16_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data15_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C4_StroopNEU.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C4_StroopHAP.png" height="200"></img>`;
              }
            }
          },
          labels: ['Likely BLUE', 'Likely GREEN']
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'round10_matrix_c0.png',
          stimulus_width: 500,
          prompt: '<p> Please press <strong>G</strong> on the keyboard to invest in <strong>GREEN</strong> and <strong>B</strong> on the keyboard to invest in <strong>BLUE</strong>.</p>', 
          choices: ['g','b'],
          on_finish: function(data){
            // Score the response as correct or incorrect.
            if(jsPsych.pluginAPI.compareKeys(data.response, "g")){
              data.correct = true;
            } else {
              data.correct = false; 
            }
          }
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'loading.gif',
          stimulus_width: 200,
          prompt: '<p> Waiting for Anonymous35 to invest... </p>',
          trial_duration: 8000, 
          render_on_canvas: false,
          choices: jsPsych.NO_KEYS
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data17_1 = jsPsych.data.get().last(8).values()[0];
            var data18_1 = jsPsych.data.get().last(2).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data18_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data17_1.response, 'g')){
            return jsPsych.timelineVariable('counter_green_coop_r10_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data18_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data17_1.response, 'b')){
              return jsPsych.timelineVariable('counter_green_defe_r10_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data18_1.response, 'b') && jsPsych.pluginAPI.compareKeys(data17_1.response, 'g')){
              return jsPsych.timelineVariable('counter_blue_coop_r10_A35');
            } else {
              return jsPsych.timelineVariable('counter_blue_defe_r10_A35');
            }
          }
        },
        {
          type: 'html-button-response',
          choices: function() { 
            if(CONDITION == 1 || CONDITION == 2) {
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}; 
            if(CONDITION == 3 || CONDITION == 4) { 
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}
          }, 
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data17_2 = jsPsych.data.get().last(9).values()[0];
            var data18_2 = jsPsych.data.get().last(3).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data18_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data17_2.response, 'g')){
            return jsPsych.timelineVariable('par_gg_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data18_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data17_2.response, 'b')){
              return jsPsych.timelineVariable('par_gb_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data18_2.response, 'b') && jsPsych.pluginAPI.compareKeys(data17_2.response, 'g')){
              return jsPsych.timelineVariable('par_bg_res_A35');
            } else {
              return jsPsych.timelineVariable('par_bb_res_A35');
            }
          }
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data17_3 = jsPsych.data.get().last(10).values()[0];
            var data18_3 = jsPsych.data.get().last(4).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data18_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data17_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data18_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data17_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data18_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data17_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data18_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data17_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data18_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data17_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data18_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data17_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data18_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data17_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data18_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data17_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C3_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data18_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data17_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C3_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data18_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data17_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C4_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data18_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data17_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C4_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data18_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data17_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C4_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C4_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            }
          }
        },
        {
          type: 'html-slider-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data17_4 = jsPsych.data.get().last(11).values()[0];
            var data18_4 = jsPsych.data.get().last(5).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data18_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data17_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data18_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data17_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data18_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data17_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C1.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C1.png" height="200"></img>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data18_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data17_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data18_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data17_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data18_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data17_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C2.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C2.png" height="200"></img>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data18_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data17_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C3_StroopREG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data18_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data17_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C3_StroopHAP.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data18_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data17_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C3_StroopHAP.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C3_StroopREG.png" height="200"></img>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data18_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data17_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C4_StroopHAP.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data18_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data17_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C4_StroopNEU.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data18_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data17_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C4_StroopNEU.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C4_StroopREG.png" height="200"></img>`;
              }
            } 
          },
          labels: ['Likely BLUE', 'Likely GREEN']
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'round11_matrix_c0.png',
          stimulus_width: 500,
          prompt: '<p> Please press <strong>G</strong> on the keyboard to invest in <strong>GREEN</strong> and <strong>B</strong> on the keyboard to invest in <strong>BLUE</strong>.</p>', 
          choices: ['g','b'],
          on_finish: function(data){
            // Score the response as correct or incorrect.
            if(jsPsych.pluginAPI.compareKeys(data.response, "g")){
              data.correct = true;
            } else {
              data.correct = false; 
            }
          }
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'loading.gif',
          stimulus_width: 200,
          prompt: '<p> Waiting for Anonymous35 to invest... </p>',
          trial_duration: 7000, 
          render_on_canvas: false,
          choices: jsPsych.NO_KEYS
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data19_1 = jsPsych.data.get().last(8).values()[0];
            var data20_1 = jsPsych.data.get().last(2).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data20_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data19_1.response, 'g')){
            return jsPsych.timelineVariable('counter_green_coop_r11_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data20_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data19_1.response, 'b')){
              return jsPsych.timelineVariable('counter_green_defe_r11_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data20_1.response, 'b') && jsPsych.pluginAPI.compareKeys(data19_1.response, 'g')){
              return jsPsych.timelineVariable('counter_blue_coop_r11_A35');
            } else {
              return jsPsych.timelineVariable('counter_blue_defe_r11_A35');
            }
          }
        },
         {
          type: 'html-button-response',
          choices: function() { 
            if(CONDITION == 1 || CONDITION == 2) {
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}; 
            if(CONDITION == 3 || CONDITION == 4) { 
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}
          }, 
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data19_2 = jsPsych.data.get().last(9).values()[0];
            var data20_2 = jsPsych.data.get().last(3).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data20_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data19_2.response, 'g')){
            return jsPsych.timelineVariable('par_gg_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data20_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data19_2.response, 'b')){
              return jsPsych.timelineVariable('par_gb_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data20_2.response, 'b') && jsPsych.pluginAPI.compareKeys(data19_2.response, 'g')){
              return jsPsych.timelineVariable('par_bg_res_A35');
            } else {
              return jsPsych.timelineVariable('par_bb_res_A35');
            }
          }
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data19_3 = jsPsych.data.get().last(10).values()[0];
            var data20_3 = jsPsych.data.get().last(4).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data20_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data19_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data20_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data19_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data20_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data19_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data20_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data19_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data20_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data19_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data20_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data19_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data20_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data19_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data20_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data19_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data20_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data19_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C3_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data20_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data19_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C4_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data20_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data19_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C4_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data20_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data19_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C4_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C4_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            }
          }
        },
        {
          type: 'html-slider-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data19_4 = jsPsych.data.get().last(11).values()[0];
            var data20_4 = jsPsych.data.get().last(5).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data20_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data19_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data20_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data19_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data20_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data19_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C1.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C1.png" height="200"></img>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data20_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data19_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data20_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data19_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data20_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data19_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C2.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C2.png" height="200"></img>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data20_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data19_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C3_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data20_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data19_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C3_StroopHAP.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data20_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data19_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C3_StroopHAP.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C3_StroopHAP.png" height="200"></img>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data20_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data19_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C4_StroopNEU.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data20_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data19_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C4_StroopNEU.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data20_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data19_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C4_StroopREG.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C4_StroopHAP.png" height="200"></img>`;
              }
            }
          },
          labels: ['Likely BLUE', 'Likely GREEN']
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'round12_matrix_c0.png',
          stimulus_width: 500,
          prompt: '<p> Please press <strong>G</strong> on the keyboard to invest in <strong>GREEN</strong> and <strong>B</strong> on the keyboard to invest in <strong>BLUE</strong>.</p>', 
          choices: ['g','b'],
          on_finish: function(data){
            // Score the response as correct or incorrect.
            if(jsPsych.pluginAPI.compareKeys(data.response, "g")){
              data.correct = true;
            } else {
              data.correct = false; 
            }
          }
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'loading.gif',
          stimulus_width: 200,
          prompt: '<p> Waiting for Anonymous35 to invest... </p>',
          trial_duration: 5500, 
          render_on_canvas: false,
          choices: jsPsych.NO_KEYS
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data21_1 = jsPsych.data.get().last(8).values()[0];
            var data22_1 = jsPsych.data.get().last(2).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data22_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data21_1.response, 'g')){
            return jsPsych.timelineVariable('counter_green_coop_r12_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data22_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data21_1.response, 'b')){
              return jsPsych.timelineVariable('counter_green_defe_r12_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data22_1.response, 'b') && jsPsych.pluginAPI.compareKeys(data21_1.response, 'g')){
              return jsPsych.timelineVariable('counter_blue_coop_r12_A35');
            } else {
              return jsPsych.timelineVariable('counter_blue_defe_r12_A35');
            }
          }
        },
        {
          type: 'html-button-response',
          choices: function() { 
            if(CONDITION == 1 || CONDITION == 2) {
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}; 
            if(CONDITION == 3 || CONDITION == 4) { 
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}
          },
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data21_2 = jsPsych.data.get().last(9).values()[0];
            var data22_2 = jsPsych.data.get().last(3).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data22_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data21_2.response, 'g')){
            return jsPsych.timelineVariable('par_gg_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data22_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data21_2.response, 'b')){
              return jsPsych.timelineVariable('par_gb_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data22_2.response, 'b') && jsPsych.pluginAPI.compareKeys(data21_2.response, 'g')){
              return jsPsych.timelineVariable('par_bg_res_A35');
            } else {
              return jsPsych.timelineVariable('par_bb_res_A35');
            }
          }
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data21_3 = jsPsych.data.get().last(10).values()[0];
            var data22_3 = jsPsych.data.get().last(4).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data22_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data21_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data22_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data21_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data22_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data21_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data22_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data21_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data22_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data21_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data22_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data21_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data22_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data21_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data22_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data21_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C3_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data22_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data21_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C3_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data22_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data21_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C4_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data22_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data21_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C4_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data22_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data21_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C4_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C4_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            }
          }
        },
        {
          type: 'html-slider-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data21_4 = jsPsych.data.get().last(11).values()[0];
            var data22_4 = jsPsych.data.get().last(5).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data22_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data21_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data22_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data21_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data22_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data21_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C1.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C1.png" height="200"></img>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data22_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data21_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data22_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data21_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data22_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data21_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C2.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C2.png" height="200"></img>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data22_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data21_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C3_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data22_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data21_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C3_StroopHAP.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data22_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data21_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C3_StroopHAP.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C3_StroopHAP.png" height="200"></img>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data22_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data21_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C4_StroopHAP.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data22_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data21_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C4_StroopREG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data22_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data21_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C4_StroopHAP.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C4_StroopANG.png" height="200"></img>`;
              }
            } 
          },
          labels: ['Likely BLUE', 'Likely GREEN']
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'round13_matrix_c0.png',
          stimulus_width: 500,
          prompt: '<p> Please press <strong>G</strong> on the keyboard to invest in <strong>GREEN</strong> and <strong>B</strong> on the keyboard to invest in <strong>BLUE</strong>.</p>', 
          choices: ['g','b'],
          on_finish: function(data){
            // Score the response as correct or incorrect.
            if(jsPsych.pluginAPI.compareKeys(data.response, "g")){
              data.correct = true;
            } else {
              data.correct = false; 
            }
          }
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'loading.gif',
          stimulus_width: 200,
          prompt: '<p> Waiting for Anonymous35 to invest... </p>',
          trial_duration: 10000, 
          render_on_canvas: false,
          choices: jsPsych.NO_KEYS
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data23_1 = jsPsych.data.get().last(8).values()[0];
            var data24_1 = jsPsych.data.get().last(2).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data24_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data23_1.response, 'g')){
            return jsPsych.timelineVariable('counter_green_coop_r13_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data24_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data23_1.response, 'b')){
              return jsPsych.timelineVariable('counter_green_defe_r13_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data24_1.response, 'b') && jsPsych.pluginAPI.compareKeys(data23_1.response, 'g')){
              return jsPsych.timelineVariable('counter_blue_coop_r13_A35');
            } else {
              return jsPsych.timelineVariable('counter_blue_defe_r13_A35');
            }
          }
        },
       {
          type: 'html-button-response',
          choices: function() { 
            if(CONDITION == 1 || CONDITION == 2) {
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}; 
            if(CONDITION == 3 || CONDITION == 4) { 
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}
          },
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data23_2 = jsPsych.data.get().last(9).values()[0];
            var data24_2 = jsPsych.data.get().last(3).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data24_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data23_2.response, 'g')){
            return jsPsych.timelineVariable('par_gg_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data24_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data23_2.response, 'b')){
              return jsPsych.timelineVariable('par_gb_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data24_2.response, 'b') && jsPsych.pluginAPI.compareKeys(data23_2.response, 'g')){
              return jsPsych.timelineVariable('par_bg_res_A35');
            } else {
              return jsPsych.timelineVariable('par_bb_res_A35');
            }
          }
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data23_3 = jsPsych.data.get().last(10).values()[0];
            var data24_3 = jsPsych.data.get().last(4).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data24_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data23_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data24_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data23_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data24_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data23_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data24_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data23_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data24_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data23_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data24_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data23_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data24_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data23_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data24_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data23_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data24_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data23_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C3_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C3_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data24_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data23_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C4_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data24_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data23_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C4_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data24_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data23_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C4_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C4_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            }
          }
        },
        {
          type: 'html-slider-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data23_4 = jsPsych.data.get().last(11).values()[0];
            var data24_4 = jsPsych.data.get().last(5).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data24_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data23_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data24_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data23_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data24_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data23_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C1.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C1.png" height="200"></img>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data24_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data23_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data24_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data23_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data24_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data23_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C2.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C2.png" height="200"></img>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data24_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data23_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C3_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data24_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data23_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C3_StroopHAP.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data24_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data23_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C3_StroopREG.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C3_StroopREG.png" height="200"></img>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data24_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data23_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C4_StroopHAP.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data24_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data23_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C4_StroopNEU.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data24_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data23_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C4_StroopHAP.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C4_StroopHAP.png" height="200"></img>`;
              }
            }
          },
          labels: ['Likely BLUE', 'Likely GREEN']
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'round14_matrix_c0.png',
          stimulus_width: 500,
          prompt: '<p> Please press <strong>G</strong> on the keyboard to invest in <strong>GREEN</strong> and <strong>B</strong> on the keyboard to invest in <strong>BLUE</strong>.</p>', 
          choices: ['g','b'],
          on_finish: function(data){
            // Score the response as correct or incorrect.
            if(jsPsych.pluginAPI.compareKeys(data.response, "g")){
              data.correct = true;
            } else {
              data.correct = false; 
            }
          }
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'loading.gif',
          stimulus_width: 200,
          prompt: '<p> Waiting for Anonymous35 to invest... </p>',
          trial_duration: 9000, 
          render_on_canvas: false,
          choices: jsPsych.NO_KEYS
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data25_1 = jsPsych.data.get().last(8).values()[0];
            var data26_1 = jsPsych.data.get().last(2).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data26_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data25_1.response, 'g')){
            return jsPsych.timelineVariable('counter_green_coop_r14_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data26_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data25_1.response, 'b')){
              return jsPsych.timelineVariable('counter_green_defe_r14_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data26_1.response, 'b') && jsPsych.pluginAPI.compareKeys(data25_1.response, 'g')){
              return jsPsych.timelineVariable('counter_blue_coop_r14_A35');
            } else {
              return jsPsych.timelineVariable('counter_blue_defe_r14_A35');
            }
          }
        },
       {
          type: 'html-button-response',
          choices: function() { 
            if(CONDITION == 1 || CONDITION == 2) {
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}; 
            if(CONDITION == 3 || CONDITION == 4) { 
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}
          },
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data25_2 = jsPsych.data.get().last(9).values()[0];
            var data26_2 = jsPsych.data.get().last(3).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data26_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data25_2.response, 'g')){
            return jsPsych.timelineVariable('par_gg_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data26_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data25_2.response, 'b')){
              return jsPsych.timelineVariable('par_gb_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data26_2.response, 'b') && jsPsych.pluginAPI.compareKeys(data25_2.response, 'g')){
              return jsPsych.timelineVariable('par_bg_res_A35');
            } else {
              return jsPsych.timelineVariable('par_bb_res_A35');
            }
          }
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data25_3 = jsPsych.data.get().last(10).values()[0];
            var data26_3 = jsPsych.data.get().last(4).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data26_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data25_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data26_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data25_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data26_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data25_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data26_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data25_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data26_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data25_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data26_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data25_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data26_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data25_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data26_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data25_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C3_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data26_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data25_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C3_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C3_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data26_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data25_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C4_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data26_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data25_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C4_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data26_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data25_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C4_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C4_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            }
          }
        },
        {
          type: 'html-slider-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data25_4 = jsPsych.data.get().last(11).values()[0];
            var data26_4 = jsPsych.data.get().last(5).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data26_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data25_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data26_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data25_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data26_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data25_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C1.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C1.png" height="200"></img>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data26_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data25_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data26_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data25_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data26_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data25_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C2.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C2.png" height="200"></img>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data26_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data25_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C3_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data26_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data25_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C3_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data26_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data25_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C3_StroopNEU.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C3_StroopREG.png" height="200"></img>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data26_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data25_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C4_StroopNEU.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data26_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data25_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C4_StroopNEU.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data26_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data25_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C4_StroopNEU.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C4_StroopANG.png" height="200"></img>`;
              }
            }
          },
          labels: ['Likely BLUE', 'Likely GREEN']
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'round15_matrix_c0.png',
          stimulus_width: 500,
          prompt: '<p> Please press <strong>G</strong> on the keyboard to invest in <strong>GREEN</strong> and <strong>B</strong> on the keyboard to invest in <strong>BLUE</strong>.</p>', 
          choices: ['g','b'],
          on_finish: function(data){
            // Score the response as correct or incorrect.
            if(jsPsych.pluginAPI.compareKeys(data.response, "g")){
              data.correct = true;
            } else {
              data.correct = false; 
            }
          }
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'loading.gif',
          stimulus_width: 200,
          prompt: '<p> Waiting for Anonymous35 to invest... </p>',
          trial_duration: 10000, 
          render_on_canvas: false,
          choices: jsPsych.NO_KEYS
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data27_1 = jsPsych.data.get().last(8).values()[0];
            var data28_1 = jsPsych.data.get().last(2).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data28_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data27_1.response, 'g')){
            return jsPsych.timelineVariable('counter_green_coop_r15_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data28_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data27_1.response, 'b')){
              return jsPsych.timelineVariable('counter_green_defe_r15_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data28_1.response, 'b') && jsPsych.pluginAPI.compareKeys(data27_1.response, 'g')){
              return jsPsych.timelineVariable('counter_blue_coop_r15_A35');
            } else {
              return jsPsych.timelineVariable('counter_blue_defe_r15_A35');
            }
          }
        },
       {
          type: 'html-button-response',
          choices: function() { 
            if(CONDITION == 1 || CONDITION == 2) {
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}; 
            if(CONDITION == 3 || CONDITION == 4) { 
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}
          },
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data27_2 = jsPsych.data.get().last(9).values()[0];
            var data28_2 = jsPsych.data.get().last(3).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data28_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data27_2.response, 'g')){
            return jsPsych.timelineVariable('par_gg_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data28_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data27_2.response, 'b')){
              return jsPsych.timelineVariable('par_gb_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data28_2.response, 'b') && jsPsych.pluginAPI.compareKeys(data27_2.response, 'g')){
              return jsPsych.timelineVariable('par_bg_res_A35');
            } else {
              return jsPsych.timelineVariable('par_bb_res_A35');
            }
          }
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data27_3 = jsPsych.data.get().last(10).values()[0];
            var data28_3 = jsPsych.data.get().last(4).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data28_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data27_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data28_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data27_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data28_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data27_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data28_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data27_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data28_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data27_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data28_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data27_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data28_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data27_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data28_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data27_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C3_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data28_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data27_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C3_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C3_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data28_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data27_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C4_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data28_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data27_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C4_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data28_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data27_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C4_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C4_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            }
          }
        },
        {
          type: 'html-slider-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data27_4 = jsPsych.data.get().last(11).values()[0];
            var data28_4 = jsPsych.data.get().last(5).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data28_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data27_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data28_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data27_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data28_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data27_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C1.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C1.png" height="200"></img>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data28_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data27_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data28_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data27_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data28_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data27_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C2.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C2.png" height="200"></img>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data28_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data27_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C3_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data28_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data27_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C3_StroopNEU.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data28_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data27_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C3_StroopREG.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C3_StroopHAP.png" height="200"></img>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data28_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data27_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C4_StroopHAP.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data28_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data27_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C4_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data28_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data27_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C4_StroopREG.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C4_StroopANG.png" height="200"></img>`;
              }
            }
          },
          labels: ['Likely BLUE', 'Likely GREEN']
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'round16_matrix_c0.png',
          stimulus_width: 500,
          prompt: '<p> Please press <strong>G</strong> on the keyboard to invest in <strong>GREEN</strong> and <strong>B</strong> on the keyboard to invest in <strong>BLUE</strong>.</p>', 
          choices: ['g','b'],
          on_finish: function(data){
            // Score the response as correct or incorrect.
            if(jsPsych.pluginAPI.compareKeys(data.response, "g")){
              data.correct = true;
            } else {
              data.correct = false; 
            }
          }
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'loading.gif',
          stimulus_width: 200,
          prompt: '<p> Waiting for Anonymous35 to invest... </p>',
          trial_duration: 10000, 
          render_on_canvas: false,
          choices: jsPsych.NO_KEYS
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data29_1 = jsPsych.data.get().last(8).values()[0];
            var data30_1 = jsPsych.data.get().last(2).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data30_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data29_1.response, 'g')){
            return jsPsych.timelineVariable('counter_green_coop_r16_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data30_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data29_1.response, 'b')){
              return jsPsych.timelineVariable('counter_green_defe_r16_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data30_1.response, 'b') && jsPsych.pluginAPI.compareKeys(data29_1.response, 'g')){
              return jsPsych.timelineVariable('counter_blue_coop_r16_A35');
            } else {
              return jsPsych.timelineVariable('counter_blue_defe_r16_A35');
            }
          }
        },
       {
          type: 'html-button-response',
          choices: function() { 
            if(CONDITION == 1 || CONDITION == 2) {
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}; 
            if(CONDITION == 3 || CONDITION == 4) { 
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}
          },
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data29_2 = jsPsych.data.get().last(9).values()[0];
            var data30_2 = jsPsych.data.get().last(3).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data30_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data29_2.response, 'g')){
            return jsPsych.timelineVariable('par_gg_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data30_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data29_2.response, 'b')){
              return jsPsych.timelineVariable('par_gb_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data30_2.response, 'b') && jsPsych.pluginAPI.compareKeys(data29_2.response, 'g')){
              return jsPsych.timelineVariable('par_bg_res_A35');
            } else {
              return jsPsych.timelineVariable('par_bb_res_A35');
            }
          }
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data29_3 = jsPsych.data.get().last(10).values()[0];
            var data30_3 = jsPsych.data.get().last(4).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data30_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data29_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data30_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data29_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data30_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data29_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data30_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data29_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data30_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data29_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data30_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data29_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data30_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data29_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data30_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data29_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C3_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data30_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data29_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C3_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data30_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data29_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C4_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data30_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data29_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C4_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data30_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data29_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C4_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C4_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            }
          }
        },
        {
          type: 'html-slider-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data29_4 = jsPsych.data.get().last(11).values()[0];
            var data30_4 = jsPsych.data.get().last(5).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data30_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data29_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data30_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data29_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data30_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data29_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C1.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C1.png" height="200"></img>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data30_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data29_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data30_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data29_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data30_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data29_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C2.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C2.png" height="200"></img>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data30_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data29_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C3_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data30_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data29_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C3_StroopNEU.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data30_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data29_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C3_StroopREG.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C3_StroopHAP.png" height="200"></img>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data30_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data29_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C4_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data30_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data29_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C4_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data30_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data29_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C4_StroopREG.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C4_StroopANG.png" height="200"></img>`;
              }
            }
          },
          labels: ['Likely BLUE', 'Likely GREEN']
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'round17_matrix_c0.png',
          stimulus_width: 500,
          prompt: '<p> Please press <strong>G</strong> on the keyboard to invest in <strong>GREEN</strong> and <strong>B</strong> on the keyboard to invest in <strong>BLUE</strong>.</p>', 
          choices: ['g','b'],
          on_finish: function(data){
            // Score the response as correct or incorrect.
            if(jsPsych.pluginAPI.compareKeys(data.response, "g")){
              data.correct = true;
            } else {
              data.correct = false; 
            }
          }
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'loading.gif',
          stimulus_width: 200,
          prompt: '<p> Waiting for Anonymous35 to invest... </p>',
          trial_duration: 8000, 
          render_on_canvas: false,
          choices: jsPsych.NO_KEYS
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data31_1 = jsPsych.data.get().last(8).values()[0];
            var data32_1 = jsPsych.data.get().last(2).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data32_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data31_1.response, 'g')){
            return jsPsych.timelineVariable('counter_green_coop_r17_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data32_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data31_1.response, 'b')){
              return jsPsych.timelineVariable('counter_green_defe_r17_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data32_1.response, 'b') && jsPsych.pluginAPI.compareKeys(data31_1.response, 'g')){
              return jsPsych.timelineVariable('counter_blue_coop_r17_A35');
            } else {
              return jsPsych.timelineVariable('counter_blue_defe_r17_A35');
            }
          }
        },
       {
          type: 'html-button-response',
          choices: function() { 
            if(CONDITION == 1 || CONDITION == 2) {
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}; 
            if(CONDITION == 3 || CONDITION == 4) { 
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}
          },
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data31_2 = jsPsych.data.get().last(9).values()[0];
            var data32_2 = jsPsych.data.get().last(3).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data32_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data31_2.response, 'g')){
            return jsPsych.timelineVariable('par_gg_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data32_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data31_2.response, 'b')){
              return jsPsych.timelineVariable('par_gb_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data32_2.response, 'b') && jsPsych.pluginAPI.compareKeys(data31_2.response, 'g')){
              return jsPsych.timelineVariable('par_bg_res_A35');
            } else {
              return jsPsych.timelineVariable('par_bb_res_A35');
            }
          }
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data31_3 = jsPsych.data.get().last(10).values()[0];
            var data32_3 = jsPsych.data.get().last(4).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data32_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data31_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data32_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data31_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = GB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data32_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data31_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data32_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data31_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data32_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data31_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data32_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data31_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data32_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data31_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C3_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data32_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data31_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data32_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data31_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C3_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C3_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data32_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data31_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C4_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data32_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data31_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C4_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data32_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data31_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C4_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C4_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            }
          }
        },
        {
          type: 'html-slider-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data31_4 = jsPsych.data.get().last(11).values()[0];
            var data32_4 = jsPsych.data.get().last(5).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data32_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data31_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data32_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data31_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data32_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data31_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C1.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C1.png" height="200"></img>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data32_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data31_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data32_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data31_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data32_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data31_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C2.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C2.png" height="200"></img>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data32_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data31_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C3_StroopNEU.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data32_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data31_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C3_StroopHAP.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data32_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data31_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C3_StroopNEU.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C3_StroopREG.png" height="200"></img>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data32_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data31_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C4_StroopNEU.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data32_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data31_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C4_StroopNEU.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data32_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data31_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C4_StroopHAP.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C4_StroopHAP.png" height="200"></img>`;
              }
            }
          },
          labels: ['Likely BLUE', 'Likely GREEN']
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'round18_matrix_c0.png',
          stimulus_width: 500,
          prompt: '<p> Please press <strong>G</strong> on the keyboard to invest in <strong>GREEN</strong> and <strong>B</strong> on the keyboard to invest in <strong>BLUE</strong>.</p>', 
          choices: ['g','b'],
          on_finish: function(data){
            // Score the response as correct or incorrect.
            if(jsPsych.pluginAPI.compareKeys(data.response, "g")){
              data.correct = true;
            } else {
              data.correct = false; 
            }
          }
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'loading.gif',
          stimulus_width: 200,
          prompt: '<p> Waiting for Anonymous35 to invest... </p>',
          trial_duration: 6000, 
          render_on_canvas: false,
          choices: jsPsych.NO_KEYS
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data33_1 = jsPsych.data.get().last(8).values()[0];
            var data34_1 = jsPsych.data.get().last(2).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data34_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data33_1.response, 'g')){
            return jsPsych.timelineVariable('counter_green_coop_r18_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data34_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data33_1.response, 'b')){
              return jsPsych.timelineVariable('counter_green_defe_r18_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data34_1.response, 'b') && jsPsych.pluginAPI.compareKeys(data33_1.response, 'g')){
              return jsPsych.timelineVariable('counter_blue_coop_r18_A35');
            } else {
              return jsPsych.timelineVariable('counter_blue_defe_r18_A35');
            }
          }
        },
       {
          type: 'html-button-response',
          choices: function() { 
            if(CONDITION == 1 || CONDITION == 2) {
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}; 
            if(CONDITION == 3 || CONDITION == 4) { 
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}
          },
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data33_2 = jsPsych.data.get().last(9).values()[0];
            var data34_2 = jsPsych.data.get().last(3).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data34_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data33_2.response, 'g')){
            return jsPsych.timelineVariable('par_gg_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data34_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data33_2.response, 'b')){
              return jsPsych.timelineVariable('par_gb_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data34_2.response, 'b') && jsPsych.pluginAPI.compareKeys(data33_2.response, 'g')){
              return jsPsych.timelineVariable('par_bg_res_A35');
            } else {
              return jsPsych.timelineVariable('par_bb_res_A35');
            }
          }
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data33_3 = jsPsych.data.get().last(10).values()[0];
            var data34_3 = jsPsych.data.get().last(4).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data34_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data33_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data34_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data33_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data34_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data33_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data34_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data33_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data34_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data33_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data34_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data33_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data34_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data33_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C3_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data34_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data33_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C3_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data34_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data33_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C3_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C3_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data34_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data33_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GG_C4_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data34_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data33_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C4_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data34_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data33_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BG_C4_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C4_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            }
          }
        },
        {
          type: 'html-slider-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data33_4 = jsPsych.data.get().last(11).values()[0];
            var data34_4 = jsPsych.data.get().last(5).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data34_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data33_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data34_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data33_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data34_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data33_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C1.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C1.png" height="200"></img>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data34_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data33_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data34_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data33_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data34_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data33_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C2.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C2.png" height="200"></img>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data34_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data33_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C3_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data34_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data33_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C3_StroopNEU.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data34_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data33_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C3_StroopREG.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C3_StroopANG.png" height="200"></img>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data34_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data33_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GG_C4_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data34_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data33_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C4_StroopNEU.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data34_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data33_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BG_C4_StroopNEU.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C4_StroopANG.png" height="200"></img>`;
              }
            }
          },
          labels: ['Likely BLUE', 'Likely GREEN']
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'round19_matrix_c0.png',
          stimulus_width: 500,
          prompt: '<p> Please press <strong>G</strong> on the keyboard to invest in <strong>GREEN</strong> and <strong>B</strong> on the keyboard to invest in <strong>BLUE</strong>.</p>', 
          choices: ['g','b'],
          on_finish: function(data){
            // Score the response as correct or incorrect.
            if(jsPsych.pluginAPI.compareKeys(data.response, "g")){
              data.correct = true;
            } else {
              data.correct = false; 
            }
          }
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'loading.gif',
          stimulus_width: 200,
          prompt: '<p> Waiting for Anonymous35 to invest... </p>',
          trial_duration: 7000, 
          render_on_canvas: false,
          choices: jsPsych.NO_KEYS
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data35_1 = jsPsych.data.get().last(8).values()[0];
            var data36_1 = jsPsych.data.get().last(2).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data36_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data35_1.response, 'g')){
            return jsPsych.timelineVariable('counter_green_defe_r19_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data36_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data35_1.response, 'b')){
              return jsPsych.timelineVariable('counter_green_defe_r19_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data36_1.response, 'b') && jsPsych.pluginAPI.compareKeys(data35_1.response, 'g')){
              return jsPsych.timelineVariable('counter_blue_defe_r19_A35');
            } else {
              return jsPsych.timelineVariable('counter_blue_defe_r19_A35');
            }
          }
        },
       {
          type: 'html-button-response',
          choices: function() { 
            if(CONDITION == 1 || CONDITION == 2) {
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}; 
            if(CONDITION == 3 || CONDITION == 4) { 
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}
          },
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data35_2 = jsPsych.data.get().last(9).values()[0];
            var data36_2 = jsPsych.data.get().last(3).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data36_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data35_2.response, 'g')){
            return jsPsych.timelineVariable('par_gb_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data36_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data35_2.response, 'b')){
              return jsPsych.timelineVariable('par_gb_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data36_2.response, 'b') && jsPsych.pluginAPI.compareKeys(data35_2.response, 'g')){
              return jsPsych.timelineVariable('par_bb_res_A35');
            } else {
              return jsPsych.timelineVariable('par_bb_res_A35');
            }
          }
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data35_3 = jsPsych.data.get().last(10).values()[0];
            var data36_3 = jsPsych.data.get().last(4).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data36_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data35_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data36_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data35_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data36_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data35_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data36_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data35_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data36_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data35_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data36_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data35_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data36_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data35_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C3_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data36_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data35_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data36_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data35_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C3_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C3_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data36_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data35_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C4_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data36_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data35_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C4_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data36_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data35_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C4_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C4_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            }
          }
        },
        {
          type: 'html-slider-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data35_4 = jsPsych.data.get().last(11).values()[0];
            var data36_4 = jsPsych.data.get().last(5).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data36_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data35_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data36_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data35_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C1.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data36_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data35_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C1.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C1.png" height="200"></img>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data36_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data35_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data36_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data35_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C2.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data36_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data35_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C2.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C2.png" height="200"></img>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data36_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data35_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C3_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data36_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data35_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C3_StroopNEU.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data36_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data35_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C3_StroopHAP.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C3_StroopREG.png" height="200"></img>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data36_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data35_4.response, 'g')){
              return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C4_StroopREG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data36_4.response, 'g') && jsPsych.pluginAPI.compareKeys(data35_4.response, 'b')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "GB_C4_StroopANG.png" height="200"></img>`;
              } else if(jsPsych.pluginAPI.compareKeys(data36_4.response, 'b') && jsPsych.pluginAPI.compareKeys(data35_4.response, 'g')){
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C4_StroopHAP.png" height="200"></img>`;
              } else {
                return `<p> How likely is Anonymous35 to choose GREEN in the next round?</p> <img src = "BB_C4_StroopANG.png" height="200"></img>`;
              }
            }
          },
          labels: ['Likely BLUE', 'Likely GREEN']
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'round20_matrix_c0.png',
          stimulus_width: 500,
          prompt: '<p> Please press <strong>G</strong> on the keyboard to invest in <strong>GREEN</strong> and <strong>B</strong> on the keyboard to invest in <strong>BLUE</strong>.</p>', 
          choices: ['g','b'],
          on_finish: function(data){
            // Score the response as correct or incorrect.
            if(jsPsych.pluginAPI.compareKeys(data.response, "g")){
              data.correct = true;
            } else {
              data.correct = false; 
            }
          }
        },
        {
          type: 'image-keyboard-response',
          stimulus: 'loading.gif',
          stimulus_width: 200,
          prompt: '<p> Waiting for Anonymous35 to invest... </p>',
          trial_duration: 10000, 
          render_on_canvas: false,
          choices: jsPsych.NO_KEYS
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data37_1 = jsPsych.data.get().last(8).values()[0];
            var data38_1 = jsPsych.data.get().last(2).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data38_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data37_1.response, 'g')){
            return jsPsych.timelineVariable('counter_green_defe_r20_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data38_1.response, 'g') && jsPsych.pluginAPI.compareKeys(data37_1.response, 'b')){
              return jsPsych.timelineVariable('counter_green_defe_r20_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data38_1.response, 'b') && jsPsych.pluginAPI.compareKeys(data37_1.response, 'g')){
              return jsPsych.timelineVariable('counter_blue_defe_r20_A35');
            } else {
              return jsPsych.timelineVariable('counter_blue_defe_r20_A35');
            }
          }
        },
       {
          type: 'html-button-response',
          choices: function() { 
            if(CONDITION == 1 || CONDITION == 2) {
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}; 
            if(CONDITION == 3 || CONDITION == 4) { 
            return ["<img src='A16_Neutral.png' width = '140' height ='100'>", "<img src='A16_Happiness.png' width ='140' height ='100'>", "<img src='A16_Anger.png' width = '140' height ='100'>", "<img src='A16_Regretful.png' width = '140' height ='100'>"]}
          },
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data37_2 = jsPsych.data.get().last(9).values()[0];
            var data38_2 = jsPsych.data.get().last(3).values()[0];
            if(jsPsych.pluginAPI.compareKeys(data38_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data37_2.response, 'g')){
            return jsPsych.timelineVariable('par_gb_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data38_2.response, 'g') && jsPsych.pluginAPI.compareKeys(data37_2.response, 'b')){
              return jsPsych.timelineVariable('par_gb_res_A35');
            } else if(jsPsych.pluginAPI.compareKeys(data38_2.response, 'b') && jsPsych.pluginAPI.compareKeys(data37_2.response, 'g')){
              return jsPsych.timelineVariable('par_bb_res_A35');
            } else {
              return jsPsych.timelineVariable('par_bb_res_A35');
            }
          }
        },
        {
          type: 'html-keyboard-response',
          stimulus: function(){
                // get the data from the previous trial,
                // and check which key was pressed
            var data37_3 = jsPsych.data.get().last(10).values()[0];
            var data38_3 = jsPsych.data.get().last(4).values()[0];
            if(CONDITION == 1) {
              if(jsPsych.pluginAPI.compareKeys(data38_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data37_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data38_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data37_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data38_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data37_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C1.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 2) {
              if(jsPsych.pluginAPI.compareKeys(data38_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data37_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data38_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data37_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data38_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data37_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C2.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 3) {
              if(jsPsych.pluginAPI.compareKeys(data38_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data37_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C3_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data38_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data37_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C3_StroopNEU.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data38_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data37_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C3_StroopHAP.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C3_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            };
            if(CONDITION == 4) {
              if(jsPsych.pluginAPI.compareKeys(data38_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data37_3.response, 'g')){
              return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C4_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data38_3.response, 'g') && jsPsych.pluginAPI.compareKeys(data37_3.response, 'b')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "GB_C4_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else if(jsPsych.pluginAPI.compareKeys(data38_3.response, 'b') && jsPsych.pluginAPI.compareKeys(data37_3.response, 'g')){
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C4_StroopREG.png" height="200"></img> <p> Press any key to continue. </p>`;
              } else {
                return `<p> This is how Anonymous35 feels about this outcome. </p> <img src = "BB_C4_StroopANG.png" height="200"></img> <p> Press any key to continue. </p>`;
              }
            }
          }
        }
    ],
    timeline_variables: [
        { par_gg_res_A35: `<p> How do you feel about this outcome? </p> <img src = "PAR_gg_res_c0.png" height="300"></img>`,
        par_bg_res_A35: `<p> How do you feel about this outcome? </p> <img src = "PAR_bg_res_c0.png" height="300"></img>`,
        par_gb_res_A35: `<p> How do you feel about this outcome? </p> <img src = "PAR_gb_res_c0.png" height="300"></img>`,
        par_bb_res_A35: `<p> How do you feel about this outcome? </p> <img src = "PAR_bb_res_c0.png" height="300"></img>`,
        counter_green_coop_r1_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>GREEN</strong>. You <strong>each</strong> received <strong>5 points</strong>. Press any key to proceed. </p>",
        counter_blue_coop_r1_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>GREEN</strong>. You received <strong>7 points</strong>. Anonymous35 received <strong>2 points</strong>. Press any key to proceed. </p>",
        counter_green_coop_r2_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>GREEN</strong>. You <strong>each</strong> received <strong>5 points</strong>. Press any key to proceed. </p>" , 
        counter_blue_coop_r2_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>GREEN</strong>. You received <strong>7 points</strong>. Anonymous35 received <strong>2 points</strong>. Press any key to proceed. </p>",
        counter_green_defe_r2_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>BLUE</strong>. You received <strong>2 points</strong>. Anonymous35 received <strong>7 points</strong>. Press any key to proceed. </p>", 
        counter_blue_defe_r2_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>BLUE</strong>. You <strong>each</strong> received <strong>3 points</strong>. Press any key to proceed. </p>",
        counter_green_coop_r3_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>GREEN</strong>. You <strong>each</strong> received <strong>5 points</strong>. Press any key to proceed. </p>" , 
        counter_blue_coop_r3_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>GREEN</strong>. You received <strong>7 points</strong>. Anonymous35 received <strong>2 points</strong>. Press any key to proceed. </p>",
        counter_green_defe_r3_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>BLUE</strong>. You received <strong>2 points</strong>. Anonymous35 received <strong>7 points</strong>. Press any key to proceed. </p>", 
        counter_blue_defe_r3_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>BLUE</strong>. You <strong>each</strong> received <strong>3 points</strong>. Press any key to proceed. </p>",
        counter_green_coop_r4_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>GREEN</strong>. You <strong>each</strong> received <strong>5 points</strong>. Press any key to proceed. </p>" , 
        counter_blue_coop_r4_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>GREEN</strong>. You received <strong>7 points</strong>. Anonymous35 received <strong>2 points</strong>. Press any key to proceed. </p>",
        counter_green_defe_r4_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>BLUE</strong>. You received <strong>2 points</strong>. Anonymous35 received <strong>7 points</strong>. Press any key to proceed. </p>", 
        counter_blue_defe_r4_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>BLUE</strong>. You <strong>each</strong> received <strong>3 points</strong>. Press any key to proceed. </p>",
        counter_green_coop_r5_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>GREEN</strong>. You <strong>each</strong> received <strong>5 points</strong>. Press any key to proceed. </p>" , 
        counter_blue_coop_r5_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>GREEN</strong>. You received <strong>7 points</strong>. Anonymous35 received <strong>2 points</strong>. Press any key to proceed. </p>",
        counter_green_defe_r5_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>BLUE</strong>. You received <strong>2 points</strong>. Anonymous35 received <strong>7 points</strong>. Press any key to proceed. </p>", 
        counter_blue_defe_r5_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>BLUE</strong>. You <strong>each</strong> received <strong>3 points</strong>. Press any key to proceed. </p>",
        counter_green_coop_r6_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>GREEN</strong>. You <strong>each</strong> received <strong>5 points</strong>. Press any key to proceed. </p>" , 
        counter_blue_coop_r6_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>GREEN</strong>. You received <strong>7 points</strong>. Anonymous35 received <strong>2 points</strong>. Press any key to proceed. </p>",
        counter_green_defe_r6_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>BLUE</strong>. You received <strong>2 points</strong>. Anonymous35 received <strong>7 points</strong>. Press any key to proceed. </p>", 
        counter_blue_defe_r6_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>BLUE</strong>. You <strong>each</strong> received <strong>3 points</strong>. Press any key to proceed. </p>",
        counter_green_coop_r7_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>GREEN</strong>. You <strong>each</strong> received <strong>5 points</strong>. Press any key to proceed. </p>" , 
        counter_blue_coop_r7_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>GREEN</strong>. You received <strong>7 points</strong>. Anonymous35 received <strong>2 points</strong>. Press any key to proceed. </p>",
        counter_green_defe_r7_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>BLUE</strong>. You received <strong>2 points</strong>. Anonymous35 received <strong>7 points</strong>. Press any key to proceed. </p>", 
        counter_blue_defe_r7_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>BLUE</strong>. You <strong>each</strong> received <strong>3 points</strong>. Press any key to proceed. </p>",
        counter_green_coop_r8_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>GREEN</strong>. You <strong>each</strong> received <strong>5 points</strong>. Press any key to proceed. </p>" , 
        counter_blue_coop_r8_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>GREEN</strong>. You received <strong>7 points</strong>. Anonymous35 received <strong>2 points</strong>. Press any key to proceed. </p>",
        counter_green_defe_r8_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>BLUE</strong>. You received <strong>2 points</strong>. Anonymous35 received <strong>7 points</strong>. Press any key to proceed. </p>", 
        counter_blue_defe_r8_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>BLUE</strong>. You <strong>each</strong> received <strong>3 points</strong>. Press any key to proceed. </p>",
        counter_green_coop_r9_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>GREEN</strong>. You <strong>each</strong> received <strong>5 points</strong>. Press any key to proceed. </p>" , 
        counter_blue_coop_r9_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>GREEN</strong>. You received <strong>7 points</strong>. Anonymous35 received <strong>2 points</strong>. Press any key to proceed. </p>",
        counter_green_defe_r9_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>BLUE</strong>. You received <strong>2 points</strong>. Anonymous35 received <strong>7 points</strong>. Press any key to proceed. </p>", 
        counter_blue_defe_r9_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>BLUE</strong>. You <strong>each</strong> received <strong>3 points</strong>. Press any key to proceed. </p>",
        counter_green_coop_r10_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>GREEN</strong>. You <strong>each</strong> received <strong>5 points</strong>. Press any key to proceed. </p>" , 
        counter_blue_coop_r10_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>GREEN</strong>. You received <strong>7 points</strong>. Anonymous35 received <strong>2 points</strong>. Press any key to proceed. </p>",
        counter_green_defe_r10_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>BLUE</strong>. You received <strong>2 points</strong>. Anonymous35 received <strong>7 points</strong>. Press any key to proceed. </p>", 
        counter_blue_defe_r10_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>BLUE</strong>. You <strong>each</strong> received <strong>3 points</strong>. Press any key to proceed. </p>",
        counter_green_coop_r11_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>GREEN</strong>. You <strong>each</strong> received <strong>5 points</strong>. Press any key to proceed. </p>" , 
        counter_blue_coop_r11_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>GREEN</strong>. You received <strong>7 points</strong>. Anonymous35 received <strong>2 points</strong>. Press any key to proceed. </p>",
        counter_green_defe_r11_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>BLUE</strong>. You received <strong>2 points</strong>. Anonymous35 received <strong>7 points</strong>. Press any key to proceed. </p>", 
        counter_blue_defe_r11_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>BLUE</strong>. You <strong>each</strong> received <strong>3 points</strong>. Press any key to proceed. </p>",
        counter_green_coop_r12_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>GREEN</strong>. You <strong>each</strong> received <strong>5 points</strong>. Press any key to proceed. </p>" , 
        counter_blue_coop_r12_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>GREEN</strong>. You received <strong>7 points</strong>. Anonymous35 received <strong>2 points</strong>. Press any key to proceed. </p>",
        counter_green_defe_r12_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>BLUE</strong>. You received <strong>2 points</strong>. Anonymous35 received <strong>7 points</strong>. Press any key to proceed. </p>", 
        counter_blue_defe_r12_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>BLUE</strong>. You <strong>each</strong> received <strong>3 points</strong>. Press any key to proceed. </p>",
        counter_green_coop_r13_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>GREEN</strong>. You <strong>each</strong> received <strong>5 points</strong>. Press any key to proceed. </p>" , 
        counter_blue_coop_r13_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>GREEN</strong>. You received <strong>7 points</strong>. Anonymous35 received <strong>2 points</strong>. Press any key to proceed. </p>",
        counter_green_defe_r13_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>BLUE</strong>. You received <strong>2 points</strong>. Anonymous35 received <strong>7 points</strong>. Press any key to proceed. </p>", 
        counter_blue_defe_r13_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>BLUE</strong>. You <strong>each</strong> received <strong>3 points</strong>. Press any key to proceed. </p>",
        counter_green_coop_r14_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>GREEN</strong>. You <strong>each</strong> received <strong>5 points</strong>. Press any key to proceed. </p>" , 
        counter_blue_coop_r14_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>GREEN</strong>. You received <strong>7 points</strong>. Anonymous35 received <strong>2 points</strong>. Press any key to proceed. </p>",
        counter_green_defe_r14_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>BLUE</strong>. You received <strong>2 points</strong>. Anonymous35 received <strong>7 points</strong>. Press any key to proceed. </p>", 
        counter_blue_defe_r14_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>BLUE</strong>. You <strong>each</strong> received <strong>3 points</strong>. Press any key to proceed. </p>",
        counter_green_coop_r15_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>GREEN</strong>. You <strong>each</strong> received <strong>5 points</strong>. Press any key to proceed. </p>" , 
        counter_blue_coop_r15_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>GREEN</strong>. You received <strong>7 points</strong>. Anonymous35 received <strong>2 points</strong>. Press any key to proceed. </p>",
        counter_green_defe_r15_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>BLUE</strong>. You received <strong>2 points</strong>. Anonymous35 received <strong>7 points</strong>. Press any key to proceed. </p>", 
        counter_blue_defe_r15_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>BLUE</strong>. You <strong>each</strong> received <strong>3 points</strong>. Press any key to proceed. </p>",
        counter_green_coop_r16_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>GREEN</strong>. You <strong>each</strong> received <strong>5 points</strong>. Press any key to proceed. </p>" , 
        counter_blue_coop_r16_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>GREEN</strong>. You received <strong>7 points</strong>. Anonymous35 received <strong>2 points</strong>. Press any key to proceed. </p>",
        counter_green_defe_r16_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>BLUE</strong>. You received <strong>2 points</strong>. Anonymous35 received <strong>7 points</strong>. Press any key to proceed. </p>", 
        counter_blue_defe_r16_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>BLUE</strong>. You <strong>each</strong> received <strong>3 points</strong>. Press any key to proceed. </p>",
        counter_green_coop_r17_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>GREEN</strong>. You <strong>each</strong> received <strong>5 points</strong>. Press any key to proceed. </p>" , 
        counter_blue_coop_r17_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>GREEN</strong>. You received <strong>7 points</strong>. Anonymous35 received <strong>2 points</strong>. Press any key to proceed. </p>",
        counter_green_defe_r17_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>BLUE</strong>. You received <strong>2 points</strong>. Anonymous35 received <strong>7 points</strong>. Press any key to proceed.</p>", 
        counter_blue_defe_r17_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>BLUE</strong>. You <strong>each</strong> received <strong>3 points</strong>. Press any key to proceed. </p>",  
        counter_green_coop_r18_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>GREEN</strong>. You <strong>each</strong> received <strong>5 points</strong>. Press any key to proceed. </p>" , 
        counter_blue_coop_r18_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>GREEN</strong>. You received <strong>7 points</strong>. Anonymous35 received <strong>2 points</strong>. Press any key to proceed. </p>",
        counter_green_defe_r18_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>BLUE</strong>. You received <strong>2 points</strong>. Anonymous35 received <strong>7 points</strong>. Press any key to proceed. </p>", 
        counter_blue_defe_r18_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>BLUE</strong>. You <strong>each</strong> received <strong>3 points</strong>. Press any key to proceed. </p>",
        counter_green_defe_r19_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>BLUE</strong>. You received <strong>2 points</strong>. Anonymous35 received <strong>7 points</strong>. Press any key to proceed. </p>", 
        counter_blue_defe_r19_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>BLUE</strong>. You <strong>each</strong> received <strong>3 points</strong>. Press any key to proceed. </p>",
        counter_green_defe_r20_A35: "<p> You chose <strong>GREEN</strong>. Anonymous35 chose <strong>BLUE</strong>. You received <strong>2 points</strong>. Anonymous35 received <strong>7 points</strong>. Press any key to proceed. </p>", 
        counter_blue_defe_r20_A35: "<p> You chose <strong>BLUE</strong>. Anonymous35 chose <strong>BLUE</strong>. You <strong>each</strong> received <strong>3 points</strong>.Press any key to proceed. </p>",
        }
    ]
}

var ppir40_scale = [
  "False", 
  "Mostly false", 
  "Mostly true", 
  "True" 
]

var ppir40_likert = {
  type: 'survey-likert',
  questions: [
    {prompt: "I have always seen myself as something of a rebel.", name: 'PPIR_1', labels: ppir40_scale, required: true},
    {prompt: "I am easily flustered in pressured situations.", name: 'PPIR_2', labels: ppir40_scale, required: true},
    {prompt: "I would find the job of a movie stunt person exciting.", name: 'PPIR_3', labels: ppir40_scale, required: true},
    {prompt: "A lot of people have tried to “stab me in the back.”", name: 'PPIR_4', labels: ppir40_scale, required: true},
    {prompt: "People's reactions to the things I do often are not what I would expect.", name: 'PPIR_5', labels: ppir40_scale, required: true},
    {prompt: "I’m not good at getting people to do favors for me.", name: 'PPIR_6', labels: ppir40_scale, required: true},
    {prompt: "A lot of times, I worry when a friend is having personal problems.", name: 'PPIR_7', labels: ppir40_scale, required: true},
    {prompt: "I don’t let everyday hassles get on my nerves.", name: 'PPIR_8', labels: ppir40_scale, required: true},
    {prompt: "I could be a good “con artist.”", name: 'PPIR_9', labels: ppir40_scale, required: true},
    {prompt: "I have a talent for getting people to talk to me.", name: 'PPIR_10', labels: ppir40_scale, required: true},
    {prompt: "I might like to travel around the country with some motorcyclists and cause trouble.", name: 'PPIR_11', labels: ppir40_scale, required: true},
    {prompt: "When I’m with people who do something wrong, I usually get the blame.", name: 'PPIR_12', labels: ppir40_scale, required: true},
    {prompt: "I feel sure of myself when I’m around other people.", name: 'PPIR_13', labels: ppir40_scale, required: true},
    {prompt: "Parachute jumping would really scare me.", name: 'PPIR_14', labels: ppir40_scale, required: true},
    {prompt: "I like to dress differently from other people.", name: 'PPIR_15', labels: ppir40_scale, required: true},
    {prompt: "I enjoy seeing someone I don’t like get into trouble.", name: 'PPIR_16', labels: ppir40_scale, required: true},
    {prompt: "It bothers me a lot when I see someone crying.", name: 'PPIR_17', labels: ppir40_scale, required: true},
    {prompt: "I get stressed out when I’m “juggling” too many tasks.", name: 'PPIR_18', labels: ppir40_scale, required: true},
    {prompt: "I like to (or would like to) wear expensive and “showy” clothing.", name: 'PPIR_19', labels: ppir40_scale, required: true},
    {prompt: "I don’t care about following the “rules”; I make my own rules as I go along.", name: 'PPIR_20', labels: ppir40_scale, required: true},
    {prompt: "I’ve been the victim of a lot of bad luck.", name: 'PPIR_21', labels: ppir40_scale, required: true},
    {prompt: "I’m hardly ever the “life of the party.”", name: 'PPIR_22', labels: ppir40_scale, required: true},
    {prompt: "I’ve thought a lot about my long-term career goals.", name: 'PPIR_23', labels: ppir40_scale, required: true},
    {prompt: "I feel bad about myself after I tell a lie.", name: 'PPIR_24', labels: ppir40_scale, required: true},
    {prompt: "I push myself as hard as I can when I’m working.", name: 'PPIR_25', labels: ppir40_scale, required: true},
    {prompt: "I get very upset when I see photographs of starving people.", name: 'PPIR_26', labels: ppir40_scale, required: true},
    {prompt: "I hardly ever end up being the leader of a group.", name: 'PPIR_27', labels: ppir40_scale, required: true},
    {prompt: "I might like flying across the ocean in a hot-air balloon.", name: 'PPIR_28', labels: ppir40_scale, required: true},
    {prompt: "I worry about things even when there’s no reason to.", name: 'PPIR_29', labels: ppir40_scale, required: true},
    {prompt: "When I am doing something important, like taking a test or doing my taxes, I check it over first.", name: 'PPIR_30', labels: ppir40_scale, required: true},
    {prompt: "People I thought were my “friends” have gotten me into trouble.", name: 'PPIR_31', labels: ppir40_scale, required: true},
    {prompt: "I think long and hard before I make big decisions.", name: 'PPIR_32', labels: ppir40_scale, required: true},
    {prompt: "I quickly get annoyed with people who do not give me what I want.", name: 'PPIR_33', labels: ppir40_scale, required: true},
    {prompt: "If I were a firefighter, I would like the thrill of saving someone from the top of a burning building.", name: 'PPIR_34', labels: ppir40_scale, required: true},
    {prompt: "I can remain calm in situations that would make many other people panic.", name: 'PPIR_35', labels: ppir40_scale, required: true},
    {prompt: "I watch my finances closely.", name: 'PPIR_36', labels: ppir40_scale, required: true},
    {prompt: "I am a daredevil.", name: 'PPIR_37', labels: ppir40_scale, required: true},
    {prompt: "I would like to hitchhike across the country with no plans.", name: 'PPIR_38', labels: ppir40_scale, required: true},
    {prompt: "I often place my friends’ needs above my own.", name: 'PPIR_39', labels: ppir40_scale, required: true},
    {prompt: "If I can’t change the rules, I try to get others to bend them for me.", name: 'PPIR_40', labels: ppir40_scale, required: true}
  ],
  randomize_question_order: true
}

var debrief = {
  type: 'html-button-response', 
  stimulus: `<p><strong> Debriefing Form </strong></p>
  <br>
  <p> Exploring the Relations between Psychopathy and Affective Feedback in Iterated Prisoner's Dilemma </p>
  <br>
  <p> The purpose of the study you just completed is to examine the relations between psychopathy and 
  cooperation in an iterated prisoner's dilemma with emotional feedback. Psychopathy is a 
  multidimensional construct comprising a constellation of cognitive, affective, and interpersonal features. 
  Although there are different conceptualizations of psychopathy, many researchers have highlighted 
  interpersonal dysfunction as a central feature of psychopathy. Accordingly, emotion recognition, an 
  affective process with significant interpersonal implications, is a process of great interest in relation to 
  psychopathy. However, research examining the link between psychopathy and emotion recognition 
  have resulted in inconsistent findings. To clarify this relation, we used a validated emotion recognition 
  task and a self-report assessment of psychopathy to collect data on emotion recognition ability and 
  psychopathy. We are also interested in whether there we would find a Dunning-Kruger effect of 
  emotion recognition in relation to psychopathy; that is, we would like to know if individuals with higher 
  levels of psychopathy would have higher confidence in their performance on the emotion recognition task despite lower performance. </p>
  <br>
  <p> The two-player investment game you completed was a variation of an Iterated Prisoner’s Dilemma, a 
  widely used game-theory paradigm used to assess cooperation. You did <strong>NOT</strong> play against a real
  participant. The opponent (Anonymous35)’s investments were according to a well-known strategy 
  named Tit-for-Tat, wherein the player always cooperates (select GREEN) in the first round, and always 
  replicates the previous decision for rounds 2–18. For the last two rounds, the player (Anoymous35) 
  always chose to defect (i.e., select BLUE). The player’s emotional feedback (i.e., how they felt about the
  investment outcome) depended on the condition you were randomly assigned to. For participants 
  assigned to the congruent and incongruent conditions, the opponent’s emotional feedback was always 
  anger for an outcome of [BLUE, GREEN], and always neutral for an outcome of [BLUE, BLUE]. For an 
  outcome of [GREEN, GREEN], the opponent was always happy in the congruent conditions (conditions 1 
  and 2), and regretful in the incongruent conditions (conditions 3 and 4). For an outcome of [GREEN, 
  BLUE], the opponent was always regretful in the congruent conditions, and happy in the incongruent 
  conditions. By using the four possible combinations of goal-relevance and cooperativeness for emotional 
  feedback, we examined whether goal-relevant, cooperative emotional feedback would increase 
  cooperation by individuals higher in psychopathy in an Iterated Prisoner’s Dilemma, which simulates 
  reciprocal social interactions. Through this research, we hope to identify conditions that may heighten 
  cooperation by individuals higher in psychopathy in interpersonal contexts.</p> 
  <br> 
  <p>Upon completion of data collection and analyses, we may publish and present the findings. Any and all 
  identifying information will be removed during data analysis, and will never be published or presented.</p> 
  <br> 
  <p>If you have any questions about this project or your rights as a participant, please contact Dr. Andrew Kazama, 
  Caroline Lee, or the Emory Institutional Review Board (IRB). </p> 
  <br> 
  <p> <strong> Andrew M. Kazama, Ph.D. </strong>: akazama@emory.edu or 404-727-2706 </p> 
  <p> <strong> Caroline Lee </strong>: caroline.lee@emory.edu or 610-850-1377 </p>
  <p> <strong> Emory Institutional Review Board</strong>: 404-712-0720 or toll-free at 877-503-9797 or by email at IRB@emory.edu</p>
  <p> IRB location: Emory University, 1599 Clifton Road 5th Floor East, Atlanta, Georgia, 30322 </p>
  <br> 
  <p> <strong>Thank you for participating in our study!</strong> </p> 
  `,
  choices: ['Exit Study']
}

jsPsych.init({
  timeline: [ ipd_procedure, consent_questions, instr, participant_id, participant_pcid, demographics, adfes_procedure, pre_ipd_procedure, attention_check, ipd_procedure, ppir40_likert, debrief ],
  on_finish: function() {
  window.location.href = "http://psychology.emory.edu/home/index.html"
  }
})
```
]

???

So this is the Javascript code for the current study 

---

## Results

.pull-left[.full-width[.content-box-green[**Hypothesis** <br> <br> Cooperative affective feedback: Rate and expectation of cooperation <span style="color: transparent;  text-shadow: 0 0 0 green; ">&#10133;</span> <br> <br> 
Competitive affective feedback: Rate and expectation of cooperation <span style="color: transparent;  text-shadow: 0 0 0 red; "> &#10134; </span> <br> <br>.green[**Supported**]]]]

.pull-right[
```{r, echo = FALSE}
m1 <- lm(IPD_Score ~ Stroop * AffectiveFeedback, data = combined_dat)

m2 <- lm(IPD_Score ~ Stroop + AffectiveFeedback, data = combined_dat)

m1.emm <- emmeans(m1, specs = c("AffectiveFeedback", "Stroop"))  

# bar-plot with 2nd factor different color
pd <- position_dodge(0.7)
gg1_1 <- ggbarplot(x="AffectiveFeedback",
                 y="IPD_Score",
                 fill="Stroop",
                 data=combined_dat,
                 add=c("mean_ci"),
                 position=pd) +
  geom_point(aes(fill=Stroop), 
             color="black", 
             position=position_jitterdodge(jitter.width=0.2), 
             show.legend=FALSE, 
             alpha=0.5) +
  ylab("Rate of Cooperation") + 
  xlab("Affective Feedback") +
  scale_fill_jco() +
  NULL

# "interaction" plot
m1.emm.dt <- data.table(summary(m1.emm))

pd = position_dodge(0.7)
gg2 <- ggplot(data=m1.emm.dt, 
              aes(x=AffectiveFeedback, 
                  y=emmean, 
                  shape=Stroop, 
                  color=Stroop, 
                  group=Stroop)) +
  geom_point(position=pd, size=3) +
  ylim(0, 1) + 
  geom_errorbar(aes(x=AffectiveFeedback, 
                    ymin=lower.CL, 
                    ymax=upper.CL,
                    group=Stroop)
                , position=pd, width=0.1) +
  geom_line(position=pd) +
  ylab("Rate of Cooperation") +
  xlab("Affective Feedback") +
  scale_color_jco() +
  theme_pubr() +
  #theme(legend.position="bottom") +
  NULL

gg2 <- m1.emm.dt %>% 
  mutate(AffectiveFeedback = fct_relevel(AffectiveFeedback, "Cooperative", "Competitive")) %>% 
  ggplot(aes(x=AffectiveFeedback, 
             y=emmean, 
             shape=Stroop, 
             color=Stroop, 
             group=Stroop)) +
    geom_point(position=pd, size=3) +
    ylim(0, 1) + 
    geom_errorbar(aes(x=AffectiveFeedback, 
                      ymin=lower.CL, 
                      ymax=upper.CL,
                      group=Stroop)
                  , position=pd, width=0.1) +
    geom_line(position=pd) +
    ylab("Rate of Cooperation") +
    xlab("Affective Feedback") +
    scale_color_jco() +
    theme_pubr() +
    #theme(legend.position="bottom") +
    NULL


# interaction "jitter" plot
gg3_1 <- gg2 +
  geom_point(data=combined_dat, aes(x=AffectiveFeedback, y=IPD_Score, fill=Stroop),
             position=position_jitterdodge(jitter.width=0.2)) +
  #             position=position_jitter(width=0.2)) +
  xlab("Affective Feedback") +
  theme(legend.position="top") +
  NULL
gg_response <- gg3_1 # used below

##################################

q1 <- lm(CoopExpect ~ Stroop * AffectiveFeedback, data = combined_dat)

q2 <- lm(CoopExpect ~ Stroop + AffectiveFeedback, data = combined_dat)

q1.emm <- emmeans(q1, specs = c("AffectiveFeedback", "Stroop"))  


# bar-plot with 2nd factor different color
pd <- position_dodge(0.7)
gg1_2 <- ggbarplot(x="AffectiveFeedback",
                 y="CoopExpect",
                 fill="Stroop",
                 data=combined_dat,
                 add=c("mean_ci"),
                 position=pd) +
  geom_point(aes(fill=Stroop), 
             color="black", 
             position=position_jitterdodge(jitter.width=0.2), 
             show.legend=FALSE, 
             alpha=0.5) +
  ylab("Expectation of Cooperation") + 
  xlab("Affective Feedback") +
  scale_fill_jco() +
  NULL

# "interaction" plot
q1.emm.dt <- data.table(summary(q1.emm))

pd = position_dodge(0.7)
gg2_2 <- ggplot(data=q1.emm.dt, 
              aes(x=AffectiveFeedback, 
                  y=emmean, 
                  shape=Stroop, 
                  color=Stroop, 
                  group=Stroop)) +
  geom_point(position=pd, size=3) +
  ylim(0, 1) + 
  geom_errorbar(aes(x=AffectiveFeedback, 
                    ymin=lower.CL, 
                    ymax=upper.CL,
                    group=Stroop)
                , position=pd, width=0.1) +
  geom_line(position=pd) +
  ylab("Expectation of Cooperation") +
  xlab("Affective Feedback") +
  scale_color_jco() +
  theme_pubr() +
  #theme(legend.position="bottom") +
  NULL

gg2_2 <- q1.emm.dt %>% 
  mutate(AffectiveFeedback = fct_relevel(AffectiveFeedback, "Cooperative", "Competitive")) %>% 
  ggplot(aes(x=AffectiveFeedback, 
             y=emmean, 
             shape=Stroop, 
             color=Stroop, 
             group=Stroop)) +
  geom_point(position=pd, size=3) +
  ylim(0, 1) + 
  geom_errorbar(aes(x=AffectiveFeedback, 
                    ymin=lower.CL, 
                    ymax=upper.CL,
                    group=Stroop)
                , position=pd, width=0.1) +
  geom_line(position=pd) +
  ylab("Expectation of Cooperation") +
  xlab("Affective Feedback") +
  scale_color_jco() +
  theme_pubr() +
  #theme(legend.position="bottom") +
  NULL

# interaction "jitter" plot
gg3_2 <- gg2_2 +
  geom_point(data=combined_dat, aes(x=AffectiveFeedback, y=CoopExpect, fill=Stroop),
             position=position_jitterdodge(jitter.width=0.2)) +
  #             position=position_jitter(width=0.2)) +
  xlab("Affective Feedback") +
  theme(legend.position="top") +
  NULL

cowplot::plot_grid(gg1_1, gg3_1, gg1_2, gg3_2, nrow=2, labels = "AUTO")

```
]


---

.center[
```{r, echo = FALSE, fig.width = 8, fig.height= 8}
m1 <- lm(IPD_Score ~ Stroop * AffectiveFeedback, data = combined_dat)

m2 <- lm(IPD_Score ~ Stroop + AffectiveFeedback, data = combined_dat)

m1.emm <- emmeans(m1, specs = c("AffectiveFeedback", "Stroop"))  

# bar-plot with 2nd factor different color
pd <- position_dodge(0.7)
gg1_1 <- ggbarplot(x="AffectiveFeedback",
                 y="IPD_Score",
                 fill="Stroop",
                 data=combined_dat,
                 add=c("mean_ci"),
                 position=pd) +
  geom_point(aes(fill=Stroop), 
             color="black", 
             position=position_jitterdodge(jitter.width=0.2), 
             show.legend=FALSE, 
             alpha=0.5) +
  ylab("Rate of Cooperation") + 
  xlab("Affective Feedback") +
  scale_fill_jco() +
  NULL

# "interaction" plot
m1.emm.dt <- data.table(summary(m1.emm))

pd = position_dodge(0.7)
gg2 <- ggplot(data=m1.emm.dt, 
              aes(x=AffectiveFeedback, 
                  y=emmean, 
                  shape=Stroop, 
                  color=Stroop, 
                  group=Stroop)) +
  geom_point(position=pd, size=3) +
  ylim(0, 1) + 
  geom_errorbar(aes(x=AffectiveFeedback, 
                    ymin=lower.CL, 
                    ymax=upper.CL,
                    group=Stroop)
                , position=pd, width=0.1) +
  geom_line(position=pd) +
  ylab("Rate of Cooperation") +
  xlab("Affective Feedback") +
  scale_color_jco() +
  theme_pubr() +
  #theme(legend.position="bottom") +
  NULL

gg2 <- m1.emm.dt %>% 
  mutate(AffectiveFeedback = fct_relevel(AffectiveFeedback, "Cooperative", "Competitive")) %>% 
  ggplot(aes(x=AffectiveFeedback, 
             y=emmean, 
             shape=Stroop, 
             color=Stroop, 
             group=Stroop)) +
    geom_point(position=pd, size=3) +
    ylim(0, 1) + 
    geom_errorbar(aes(x=AffectiveFeedback, 
                      ymin=lower.CL, 
                      ymax=upper.CL,
                      group=Stroop)
                  , position=pd, width=0.1) +
    geom_line(position=pd) +
    ylab("Rate of Cooperation") +
    xlab("Affective Feedback") +
    scale_color_jco() +
    theme_pubr() +
    #theme(legend.position="bottom") +
    NULL


# interaction "jitter" plot
gg3_1 <- gg2 +
  geom_point(data=combined_dat, aes(x=AffectiveFeedback, y=IPD_Score, fill=Stroop),
             position=position_jitterdodge(jitter.width=0.2)) +
  #             position=position_jitter(width=0.2)) +
  xlab("Affective Feedback") +
  theme(legend.position="top") +
  NULL
gg_response <- gg3_1 # used below

##################################

q1 <- lm(CoopExpect ~ Stroop * AffectiveFeedback, data = combined_dat)

q2 <- lm(CoopExpect ~ Stroop + AffectiveFeedback, data = combined_dat)

q1.emm <- emmeans(q1, specs = c("AffectiveFeedback", "Stroop"))  


# bar-plot with 2nd factor different color
pd <- position_dodge(0.7)
gg1_2 <- ggbarplot(x="AffectiveFeedback",
                 y="CoopExpect",
                 fill="Stroop",
                 data=combined_dat,
                 add=c("mean_ci"),
                 position=pd) +
  geom_point(aes(fill=Stroop), 
             color="black", 
             position=position_jitterdodge(jitter.width=0.2), 
             show.legend=FALSE, 
             alpha=0.5) +
  ylab("Expectation of Cooperation") + 
  xlab("Affective Feedback") +
  scale_fill_jco() +
  NULL

# "interaction" plot
q1.emm.dt <- data.table(summary(q1.emm))

pd = position_dodge(0.7)
gg2_2 <- ggplot(data=q1.emm.dt, 
              aes(x=AffectiveFeedback, 
                  y=emmean, 
                  shape=Stroop, 
                  color=Stroop, 
                  group=Stroop)) +
  geom_point(position=pd, size=3) +
  ylim(0, 1) + 
  geom_errorbar(aes(x=AffectiveFeedback, 
                    ymin=lower.CL, 
                    ymax=upper.CL,
                    group=Stroop)
                , position=pd, width=0.1) +
  geom_line(position=pd) +
  ylab("Expectation of Cooperation") +
  xlab("Affective Feedback") +
  scale_color_jco() +
  theme_pubr() +
  #theme(legend.position="bottom") +
  NULL

gg2_2 <- q1.emm.dt %>% 
  mutate(AffectiveFeedback = fct_relevel(AffectiveFeedback, "Cooperative", "Competitive")) %>% 
  ggplot(aes(x=AffectiveFeedback, 
             y=emmean, 
             shape=Stroop, 
             color=Stroop, 
             group=Stroop)) +
  geom_point(position=pd, size=3) +
  ylim(0, 1) + 
  geom_errorbar(aes(x=AffectiveFeedback, 
                    ymin=lower.CL, 
                    ymax=upper.CL,
                    group=Stroop)
                , position=pd, width=0.1) +
  geom_line(position=pd) +
  ylab("Expectation of Cooperation") +
  xlab("Affective Feedback") +
  scale_color_jco() +
  theme_pubr() +
  #theme(legend.position="bottom") +
  NULL

# interaction "jitter" plot
gg3_2 <- gg2_2 +
  geom_point(data=combined_dat, aes(x=AffectiveFeedback, y=CoopExpect, fill=Stroop),
             position=position_jitterdodge(jitter.width=0.2)) +
  #             position=position_jitter(width=0.2)) +
  xlab("Affective Feedback") +
  theme(legend.position="top") +
  NULL

cowplot::plot_grid(gg1_1, gg3_1, gg1_2, gg3_2, nrow=2, labels = "AUTO")

```
]

---

## Results 

.pull-left[.full-width[.content-box-green[<font style="opacity:0"> asfdasdfasdf</font> <br> **Hypothesis** <br> <br> Cooperative affective feedback: Rate of cooperation <span style="color: transparent;  text-shadow: 0 0 0 green; ">&#10133;</span> <br> <br> 
Competitive affective feedback: Rate of cooperation <span style="color: transparent;  text-shadow: 0 0 0 red; "> &#10134; </span> <br> <br>.green[**Supported**]<font style="opacity:0"> asfdasdfasdf</font> <br> <br>]]]

.pull-right[ 
```{r, echo = FALSE}
# IPD score comp vs. coop 

combined_dat_CR <- combined_dat %>% dplyr::select(ends_with("_Strategy"))

combined_dat_CR$Condition <- combined_dat$condition

coop.cr = function(x){
  decision = data.frame(table(combined_dat_CR[combined_dat_CR$Condition == 2 | combined_dat_CR$Condition == 4, x]))
  (decision[1, 2] / (decision[1, 2] + decision[2, 2])) * 100
}

Cond1or3_CR <- lapply(list("R1_Strategy", "R2_Strategy", "R3_Strategy", "R4_Strategy", "R5_Strategy", "R6_Strategy", 
                           "R7_Strategy", "R8_Strategy", "R9_Strategy", "R10_Strategy", "R11_Strategy", "R12_Strategy",
                           "R13_Strategy", "R14_Strategy", "R15_Strategy", "R16_Strategy", "R17_Strategy", "R18_Strategy",
                           "R19_Strategy", "R20_Strategy"), coop.cr)

Cooperative_Feedback <- unlist(Cond1or3_CR)

CR_Comparison <- data.frame(Cooperative_Feedback)

comp.cr = function(x){
  decision = data.frame(table(combined_dat_CR[combined_dat_CR$Condition == 1 | combined_dat_CR$Condition == 3, x]))
  (decision[1, 2] / (decision[1, 2] + decision[2, 2])) * 100
}

Cond2or4_CR <- lapply(list("R1_Strategy", "R2_Strategy", "R3_Strategy", "R4_Strategy", "R5_Strategy", "R6_Strategy", 
                           "R7_Strategy", "R8_Strategy", "R9_Strategy", "R10_Strategy", "R11_Strategy", "R12_Strategy",
                           "R13_Strategy", "R14_Strategy", "R15_Strategy", "R16_Strategy", "R17_Strategy", "R18_Strategy",
                           "R19_Strategy", "R20_Strategy"), comp.cr)

Competitive_Feedback <- unlist(Cond2or4_CR)

CR_Comparison$Competitive_Feedback <- Competitive_Feedback

CR_Comparison$Round <- c(1:20)

keycol.2 <- "Condition"

valuecol.2 <- "CoopRatio"

gathercols.2 <- c("Cooperative_Feedback", "Competitive_Feedback")

CR_Comparison <- gather_(CR_Comparison, keycol.2, valuecol.2, gathercols.2)

CR_CompPlot <- 
  ggplot(CR_Comparison, aes(x=Round, y=CoopRatio, group=Condition)) +
  geom_point(aes(color=Condition)) + 
  geom_line(aes(color=Condition)) + 
  scale_color_manual(values = c("#A6CEE3","#1F78B4"), labels = c("Cooperative", "Competitive")) + 
  ylim(0, 100) + 
  theme_classic() + 
  labs(x = "Round", y = "Cooperation Rate (%)", color = "Affective Feedback")

CR_CompPlot
```
]

---

.center[
```{r, echo = FALSE, fig.width = 8}
# IPD score comp vs. coop 

combined_dat_CR <- combined_dat %>% dplyr::select(ends_with("_Strategy"))

combined_dat_CR$Condition <- combined_dat$condition

coop.cr = function(x){
  decision = data.frame(table(combined_dat_CR[combined_dat_CR$Condition == 2 | combined_dat_CR$Condition == 4, x]))
  (decision[1, 2] / (decision[1, 2] + decision[2, 2])) * 100
}

Cond1or3_CR <- lapply(list("R1_Strategy", "R2_Strategy", "R3_Strategy", "R4_Strategy", "R5_Strategy", "R6_Strategy", 
                           "R7_Strategy", "R8_Strategy", "R9_Strategy", "R10_Strategy", "R11_Strategy", "R12_Strategy",
                           "R13_Strategy", "R14_Strategy", "R15_Strategy", "R16_Strategy", "R17_Strategy", "R18_Strategy",
                           "R19_Strategy", "R20_Strategy"), coop.cr)

Cooperative_Feedback <- unlist(Cond1or3_CR)

CR_Comparison <- data.frame(Cooperative_Feedback)

comp.cr = function(x){
  decision = data.frame(table(combined_dat_CR[combined_dat_CR$Condition == 1 | combined_dat_CR$Condition == 3, x]))
  (decision[1, 2] / (decision[1, 2] + decision[2, 2])) * 100
}

Cond2or4_CR <- lapply(list("R1_Strategy", "R2_Strategy", "R3_Strategy", "R4_Strategy", "R5_Strategy", "R6_Strategy", 
                           "R7_Strategy", "R8_Strategy", "R9_Strategy", "R10_Strategy", "R11_Strategy", "R12_Strategy",
                           "R13_Strategy", "R14_Strategy", "R15_Strategy", "R16_Strategy", "R17_Strategy", "R18_Strategy",
                           "R19_Strategy", "R20_Strategy"), comp.cr)

Competitive_Feedback <- unlist(Cond2or4_CR)

CR_Comparison$Competitive_Feedback <- Competitive_Feedback

CR_Comparison$Round <- c(1:20)

keycol.2 <- "Condition"

valuecol.2 <- "CoopRatio"

gathercols.2 <- c("Cooperative_Feedback", "Competitive_Feedback")

CR_Comparison <- gather_(CR_Comparison, keycol.2, valuecol.2, gathercols.2)

CR_CompPlot <- 
  ggplot(CR_Comparison, aes(x=Round, y=CoopRatio, group=Condition)) +
  geom_point(aes(color=Condition)) + 
  geom_line(aes(color=Condition)) + 
  scale_color_manual(values = c("#A6CEE3","#1F78B4"), labels = c("Cooperative", "Competitive")) + 
  ylim(0, 100) + 
  theme_classic() + 
  labs(x = "Round", y = "Cooperation Rate (%)", color = "Affective Feedback")

CR_CompPlot
```
]
---

## Reverse Appraisal 

![reverse_appraisal](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/reverse_appraisal.png)

.small[.left[.footnote[.gray[Gratch & de Melo, 2019]]]]

???

In the context of modified social dilemma paradigms in which affective feedback (i.e., facial emotional expressions) is presented alongside the outcome in the feedback phase (i.e., each player’s previous decision and the resulting payoff), there is an additional layer to this inferential pathway. In addition to the other player’s emotional expression, their decision in contrast to the player’s decision is presented in conjunction with one another as information from which to infer their mental state. This specific process has been termed reverse appraisal (de Melo et al., 2014; Hareli & Hess, 2010; Scherer & Grandjean, 2008). 

de Melo and colleagues studied reverse appraisal in the iterated PD paradigm by testing if the affective feedback paired with the CC and CD outcomes would enable the players to infer their mental state (specifically, their cooperative intent) in informing their decision-making via reverse appraisal. Accordingly, as the CC outcome allows both players to take the second-highest payoff while the CD outcome results in the highest payoff for the opponent while subjecting the player to the lowest payoff, de Melo and colleagues (2014) hypothesized that players would be able to infer cooperative intent from receiving the affective feedback of a happy facial expression paired with the outcome of CC, whereas they would infer competitive intent when a regretful/guilty expression is paired with the outcome. For the outcome of CD, it was hypothesized that the reverse would be true (i.e., competitive intent would be inferred from a happy facial expression, whereas cooperative intent would be inferred from a regretful/guilty expression). Indeed, in a cooperative context of mutual cooperation (i.e., CC), the opponent’s facial expression of joy led to increased expectations of cooperation, whereas the expression of regret led to decreased expectations of cooperation. As hypothesized, the opponent’s facial expression of regret in a competitive context (i.e., CD) led to increased expectations of cooperation; however, the opponent’s expression of joy in this context did not lead to decreased expectations of cooperation (de Melo et al., 2014). One possible explanation for this finding suggested by the authors is that the expression of joy in the competitive context may not have led the participants to infer a mental state reflective of an intentionally non-cooperative or malicious intent (e.g., experiencing schadenfreude in the opponent having received a worse payoff). 

---

## Results 

.pull-left[.full-width[.content-box-green[<font style="opacity:0"> asfdasdfasdf</font> <br> **Hypothesis** <br> <br> Cooperative affective feedback: Expectation of cooperation <span style="color: transparent;  text-shadow: 0 0 0 green; ">&#10133;</span> <br> <br> 
Competitive affective feedback: Expectation of cooperation <span style="color: transparent;  text-shadow: 0 0 0 red; "> &#10134; </span> <br> <br>.green[**Supported**]<font style="opacity:0"> asfdasdfasdf</font> <br> <br>]]]

.pull-right[ 
```{r, echo = FALSE}

# IPD expectation of cooperation 

combined_dat_AF <- combined_dat %>% dplyr::select(ends_with("AffectiveFeedback"))

combined_dat_AF$Condition <- combined_dat$condition 

combined_dat_AF_Cond1or3 <-
  combined_dat_AF %>% filter(Condition == 2 | Condition == 4)

combined_dat_AF_Cond1or3$Condition = NULL

combined_dat_AF_Cond2or4 <-
  combined_dat_AF %>% filter(Condition == 1 | Condition == 2)

combined_dat_AF_Cond2or4$Condition = NULL

combined_dat_CE <- combined_dat %>% dplyr::select(ends_with("CoopExpect"))

combined_dat_CE$Condition <- combined_dat$condition 

coop.ce.avg = function(x){
  mean(combined_dat_CE[combined_dat_CE$Condition == 2 | combined_dat_CE$Condition == 4, x]) * 100 - 50
}

Cond1or3_AVG <- lapply(list("R1_CoopExpect", "R2_CoopExpect", "R3_CoopExpect", "R4_CoopExpect", "R5_CoopExpect", "R6_CoopExpect",
                            "R7_CoopExpect", "R8_CoopExpect", "R9_CoopExpect", "R10_CoopExpect", "R11_CoopExpect", "R12_CoopExpect",
                            "R13_CoopExpect", "R14_CoopExpect", "R15_CoopExpect", "R16_CoopExpect", "R17_CoopExpect", "R18_CoopExpect",
                            "R19_CoopExpect"), coop.ce.avg)

Coop_Feedback <- unlist(Cond1or3_AVG)

CE_Comparison <- data.frame(Coop_Feedback)

comp.ce.avg = function(x){
  mean(combined_dat_CE[combined_dat_CE$Condition == 1 | combined_dat_CE$Condition == 3, x]) * 100 - 50
}

Cond2or4_AVG <- lapply(list("R1_CoopExpect", "R2_CoopExpect", "R3_CoopExpect", "R4_CoopExpect", "R5_CoopExpect", "R6_CoopExpect",
                            "R7_CoopExpect", "R8_CoopExpect", "R9_CoopExpect", "R10_CoopExpect", "R11_CoopExpect", "R12_CoopExpect",
                            "R13_CoopExpect", "R14_CoopExpect", "R15_CoopExpect", "R16_CoopExpect", "R17_CoopExpect", "R18_CoopExpect",
                            "R19_CoopExpect"), comp.ce.avg)

Comp_Feedback <- unlist(Cond2or4_AVG)

CE_Comparison$Comp_Feedback <- Comp_Feedback

CE_Comparison$Post_Round <- c(1:19)

keycol.1 <- "Condition"

valuecol.1 <- "CoopExp"

gathercols.1 <- c("Coop_Feedback", "Comp_Feedback")

CE_Comparison <- gather_(CE_Comparison, keycol.1, valuecol.1, gathercols.1)

CE_CompPlot <- 
  ggplot(CE_Comparison, aes(x=Post_Round, y=CoopExp, group=Condition)) +
  geom_point(aes(color=Condition)) + 
  geom_line(aes(color=Condition)) + 
  scale_color_manual(values = c("#A6CEE3","#1F78B4"), labels = c("Cooperative", "Competitive")) + 
  ylim(-50, 50) + 
  theme_classic() + 
  labs(x = "Round", y = "Expectation of Cooperation in the Following Round", color = "Affective Feedback") 

CE_CompPlot
```
]

---

.center[ 
```{r, echo = FALSE, fig.width = 8}

# IPD expectation of cooperation 

combined_dat_AF <- combined_dat %>% dplyr::select(ends_with("AffectiveFeedback"))

combined_dat_AF$Condition <- combined_dat$condition 

combined_dat_AF_Cond1or3 <-
  combined_dat_AF %>% filter(Condition == 2 | Condition == 4)

combined_dat_AF_Cond1or3$Condition = NULL

combined_dat_AF_Cond2or4 <-
  combined_dat_AF %>% filter(Condition == 1 | Condition == 2)

combined_dat_AF_Cond2or4$Condition = NULL

combined_dat_CE <- combined_dat %>% dplyr::select(ends_with("CoopExpect"))

combined_dat_CE$Condition <- combined_dat$condition 

coop.ce.avg = function(x){
  mean(combined_dat_CE[combined_dat_CE$Condition == 2 | combined_dat_CE$Condition == 4, x]) * 100 - 50
}

Cond1or3_AVG <- lapply(list("R1_CoopExpect", "R2_CoopExpect", "R3_CoopExpect", "R4_CoopExpect", "R5_CoopExpect", "R6_CoopExpect",
                            "R7_CoopExpect", "R8_CoopExpect", "R9_CoopExpect", "R10_CoopExpect", "R11_CoopExpect", "R12_CoopExpect",
                            "R13_CoopExpect", "R14_CoopExpect", "R15_CoopExpect", "R16_CoopExpect", "R17_CoopExpect", "R18_CoopExpect",
                            "R19_CoopExpect"), coop.ce.avg)

Coop_Feedback <- unlist(Cond1or3_AVG)

CE_Comparison <- data.frame(Coop_Feedback)

comp.ce.avg = function(x){
  mean(combined_dat_CE[combined_dat_CE$Condition == 1 | combined_dat_CE$Condition == 3, x]) * 100 - 50
}

Cond2or4_AVG <- lapply(list("R1_CoopExpect", "R2_CoopExpect", "R3_CoopExpect", "R4_CoopExpect", "R5_CoopExpect", "R6_CoopExpect",
                            "R7_CoopExpect", "R8_CoopExpect", "R9_CoopExpect", "R10_CoopExpect", "R11_CoopExpect", "R12_CoopExpect",
                            "R13_CoopExpect", "R14_CoopExpect", "R15_CoopExpect", "R16_CoopExpect", "R17_CoopExpect", "R18_CoopExpect",
                            "R19_CoopExpect"), comp.ce.avg)

Comp_Feedback <- unlist(Cond2or4_AVG)

CE_Comparison$Comp_Feedback <- Comp_Feedback

CE_Comparison$Post_Round <- c(1:19)

keycol.1 <- "Condition"

valuecol.1 <- "CoopExp"

gathercols.1 <- c("Coop_Feedback", "Comp_Feedback")

CE_Comparison <- gather_(CE_Comparison, keycol.1, valuecol.1, gathercols.1)

CE_CompPlot <- 
  ggplot(CE_Comparison, aes(x=Post_Round, y=CoopExp, group=Condition)) +
  geom_point(aes(color=Condition)) + 
  geom_line(aes(color=Condition)) + 
  scale_color_manual(values = c("#A6CEE3","#1F78B4"), labels = c("Cooperative", "Competitive")) + 
  ylim(-50, 50) + 
  theme_classic() + 
  labs(x = "Round", y = "Expectation of Cooperation in the Following Round", color = "Affective Feedback") 

CE_CompPlot
```
]

---
## Results 

.pull-left[.full-width[.content-box-yellow[**Hypothesis** <br> <br> <span style="color: transparent;  text-shadow: 0 0 0 green; ">&#10133;</span> Levels of PPI-R Self-Centered Impulsivity and its subscales &#10140; <br> <br> <span style="color: transparent;  text-shadow: 0 0 0 red; "> &#10134; </span> Rate and expectation of cooperation in PD <br> <br> .orange[**Partially supported**]]]]

.pull-right[
![table3](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/Table6.png)

]

---

.center[
![table3](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/Table6.png)

]

---

## Results 

.pull-left[.full-width[.content-box-yellow[**Hypothesis** <br> <br> 
Rate of cooperation: <br> <br> 
.green[**Cooperative &times; Incongruent**] .bolder[<] .cblue[**Cooperative &times; Congruent**] <br> <br> 
.coral[**Competitive &times; Incongruent**] .bolder[>] .pink[**Competitive &times; Congruent**] 
<br> <br> .orange[**Partially Supported**]]]]

.pull-right[
```{r, echo = FALSE}
ggbetweenstats(
  combined_dat,
  condition,
  IPD_Score,
  ylab = "Cooperation",
  plot.type = "boxviolin",
  type = "parametric", 
  var.equal = TRUE)
```
]

.small[
.green[**Condition 1: Cooperative &times; Incongruent**] <br>
.coral[**Condition 2: Competitive &times; Incongruent**] <br>
.cblue[**Condition 3: Cooperative &times; Congruent**] <br>
.pink[**Condition 4: Competitive &times; Congruent**] 
]

???

Supporting Hypothesis 2a, Holms-Sidak post-hoc pairwise multiple comparisons revealed that (1) participants in Condition 1 (i.e., participants who received Stroop-incongruent and cooperative affective feedback) cooperated more and expected more cooperation by the opponent in PD compared to participants in Condition 4 (i.e., participants who received Stroop-congruent and competitive affective feedback) (p < .05), and (2) participants in Condition 3 (i.e., participants who received Stroop-congruent and cooperative affective feedback) cooperated more and expected more cooperation by the opponent in PD compared to participants in Condition 4 (i.e., participants who received Stroop-congruent and competitive affective feedback) (p < 0.001). As hypothesized, participants in Condition 2 (i.e., participants who received Stroop-incongruent and competitive affective feedback) cooperated more in PD compared to participants in Condition 4 (i.e., participants who received Stroop-congruent and competitive affective feedback) (p = 0.04). However, the pairwise comparison for the expectation of cooperation was not statistically significant. 

---

.center[
```{r, echo = FALSE}
ggbetweenstats(
  combined_dat,
  condition,
  IPD_Score,
  ylab = "Cooperation",
  plot.type = "boxviolin",
  type = "parametric", 
  var.equal = TRUE)
```
]

.small[
.green[**Condition 1: Cooperative &times; Incongruent**] <br>
.coral[**Condition 2: Competitive &times; Incongruent**] <br>
.cblue[**Condition 3: Cooperative &times; Congruent**] <br>
.pink[**Condition 4: Competitive &times; Congruent**] 
]

---

## Results 

```{css, echo = F}
.pink { color: Orchid; }

.coral { color: Coral; }

.cblue { color: CornflowerBlue; }
```

.pull-left[.full-width[.content-box-red[**Hypothesis** <br> <br> 
Expectation of cooperation: <br> <br> 
.green[**Cooperative &times; Incongruent**] .bolder[<] .cblue[**Cooperative &times; Congruent**] <br> <br> 
.coral[**Competitive &times; Incongruent**] .bolder[>] .pink[**Competitive &times; Congruent**] <br> <br> .red[** Not Supported**]]]]

.pull-right[
```{r, echo = FALSE}
ggbetweenstats(
  combined_dat,
  condition,
  CoopExpect,
  ylab = "Expectation of Cooperation",
  plot.type = "boxviolin",
  type = "parametric", 
  var.equal = TRUE)
```
]

.small[
.green[**Condition 1: Cooperative &times; Incongruent**] <br>
.coral[**Condition 2: Competitive &times; Incongruent**] <br>
.cblue[**Condition 3: Cooperative &times; Congruent**] <br>
.pink[**Condition 4: Competitive &times; Congruent**] 
]

???

Supporting Hypothesis 2a, Holms-Sidak post-hoc pairwise multiple comparisons revealed that (1) participants in Condition 1 (i.e., participants who received Stroop-incongruent and cooperative affective feedback) cooperated more and expected more cooperation by the opponent in PD compared to participants in Condition 4 (i.e., participants who received Stroop-congruent and competitive affective feedback) (p < .05), and (2) participants in Condition 3 (i.e., participants who received Stroop-congruent and cooperative affective feedback) cooperated more and expected more cooperation by the opponent in PD compared to participants in Condition 4 (i.e., participants who received Stroop-congruent and competitive affective feedback) (p < 0.001). As hypothesized, participants in Condition 2 (i.e., participants who received Stroop-incongruent and competitive affective feedback) cooperated more in PD compared to participants in Condition 4 (i.e., participants who received Stroop-congruent and competitive affective feedback) (p = 0.04). However, the pairwise comparison for the expectation of cooperation was not statistically significant. 

---

.center[
```{r, echo = FALSE}
ggbetweenstats(
  combined_dat,
  condition,
  CoopExpect,
  ylab = "Expectation of Cooperation",
  plot.type = "boxviolin",
  type = "parametric", 
  var.equal = TRUE)
```
]

.small[
.green[**Condition 1: Cooperative &times; Incongruent**] <br>
.coral[**Condition 2: Competitive &times; Incongruent**] <br>
.cblue[**Condition 3: Cooperative &times; Congruent**] <br>
.pink[**Condition 4: Competitive &times; Congruent**] 
]

---

## Results 

.pull-left[.full-width[.content-box-yellow[**Hypothesis** <br> <br> 
Three-way interaction between psychopathy, affective feedback congruence, and Stroop interference <br> <br> .orange[**Partially supported**]]]]

.pull-right[ 
```{r, echo = FALSE, fig.width=10}
regint_sti_combined <- lm(scale(CoopExpect) ~ scale(PPIR_STI)*AffectiveFeedback*Stroop, data = combined_dat)

plotint_sti_combined <- plot_model(regint_sti_combined, type = "pred", terms = c("PPIR_STI", "AffectiveFeedback", "Stroop"), 
                                   title = "Predicted values of PD cooperation expectation", axis.title = c("PPI-R Stress Immunity", "Cooperation Expectation"), 
                                   legend.title = "Affective Feedback")

plotint_sti_combined
```
]

???

Finally, three-way interactions between affective feedback congruence, Stroop interference, and two PPI-R measures were detected in predicting the expectation of cooperation in PD: Stress Immunity (a subscale of Fearless Dominance) and Coldheartedness. Parallel trends emerged for the two three-way interactions between affective feedback congruence, Stroop interference, and the two PPI-R measures (Stress Immunity and Coldheartedness), with inverse trends emerging for the influence of affective feedback on cooperation in PD for higher levels of Stress Immunity and Coldheartedness depending on the presence or absence of Stroop interference (see Figure 9C and Figure 9K).  In the absence of Stroop interference, participants who received cooperative affective feedback showed increasing expectations of cooperation in PD at higher levels of Stress Immunity and Coldheartedness, whereas participants who received competitive affective feedback showed decreasing expectations of cooperation in PD at higher levels of Stress Immunity and Coldheartedness. With Stroop interference, participants who received cooperative affective feedback showed decreasing expectations of cooperation in PD at higher levels of Stress Immunity and Coldheartedness, whereas participants who received competitive affective feedback showed increasing expectations of cooperation in PD at higher levels of Stress Immunity and Coldheartedness.  

---

.center[ 
```{r, echo = FALSE, fig.width=10}
regint_sti_combined <- lm(scale(CoopExpect) ~ scale(PPIR_STI)*AffectiveFeedback*Stroop, data = combined_dat)

plotint_sti_combined <- plot_model(regint_sti_combined, type = "pred", terms = c("PPIR_STI", "AffectiveFeedback", "Stroop"), 
                                   title = "Predicted values of PD cooperation expectation", axis.title = c("PPI-R Stress Immunity", "Cooperation Expectation"), 
                                   legend.title = "Affective Feedback")

plotint_sti_combined
```
]

---

## Results 

.pull-left[.full-width[.content-box-yellow[**Hypothesis** <br> <br> 
Three-way interaction between psychopathy, affective feedback congruence, and Stroop interference <br> <br> .orange[**Partially supported**]]]]

.pull-right[ 
```{r, echo = FALSE, fig.width = 10}
regint_c_combined <- lm(scale(CoopExpect) ~ scale(PPIR_C)*AffectiveFeedback*Stroop, data = combined_dat)

plotint_c_combined <- plot_model(regint_c_combined, type = "pred", terms = c("PPIR_C", "AffectiveFeedback", "Stroop"), 
                                 title = "Predicted values of PD cooperation expectation", axis.title = c("PPI-R Coldheartedness", "Cooperation Expectation"), 
                                 legend.title = "Affective Feedback")

plotint_c_combined
```
]

???

Finally, three-way interactions between affective feedback congruence, Stroop interference, and two PPI-R measures were detected in predicting the expectation of cooperation in PD: Stress Immunity (a subscale of Fearless Dominance) and Coldheartedness. Parallel trends emerged for the two three-way interactions between affective feedback congruence, Stroop interference, and the two PPI-R measures (Stress Immunity and Coldheartedness), with inverse trends emerging for the influence of affective feedback on cooperation in PD for higher levels of Stress Immunity and Coldheartedness depending on the presence or absence of Stroop interference (see Figure 9C and Figure 9K).  In the absence of Stroop interference, participants who received cooperative affective feedback showed increasing expectations of cooperation in PD at higher levels of Stress Immunity and Coldheartedness, whereas participants who received competitive affective feedback showed decreasing expectations of cooperation in PD at higher levels of Stress Immunity and Coldheartedness. With Stroop interference, participants who received cooperative affective feedback showed decreasing expectations of cooperation in PD at higher levels of Stress Immunity and Coldheartedness, whereas participants who received competitive affective feedback showed increasing expectations of cooperation in PD at higher levels of Stress Immunity and Coldheartedness.  

---

.center[ 
```{r, echo = FALSE, fig.width = 10}
regint_c_combined <- lm(scale(CoopExpect) ~ scale(PPIR_C)*AffectiveFeedback*Stroop, data = combined_dat)

plotint_c_combined <- plot_model(regint_c_combined, type = "pred", terms = c("PPIR_C", "AffectiveFeedback", "Stroop"), 
                                 title = "Predicted values of PD cooperation expectation", axis.title = c("PPI-R Coldheartedness", "Cooperation Expectation"), 
                                 legend.title = "Affective Feedback")

plotint_c_combined
```
]

---

## Interdependence Theory 

![interdependence](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/interdependence.png)

.small[.left[.footnote[.gray[Kelley & Thibaut, 1978; Van Lange et al., 2013]]]]

???

interdependence theory, proposed by Van Lange and colleagues suggests that a complex interplay of structural influences (e.g., arrangement of the payoff matrix, length of the game, etc.), psychological characteristics (e.g., individual differences in personality, affect, motives, etc.),  and dynamic interaction processes (e.g., appraisal of the opponent’s strategy in relation to one’s own motives, etc.) contribute to decision-making in social dilemmas. To assess the interplay of such processes in interpersonal decision-making, researchers have begun to add modifications to the social dilemma paradigms, including the PD 

---

## Limitations & Future Directions

.pull-left[.full-width[.content-box-purple[Insufficient power]]]

.pull-right[.full-width[.content-box-green[Replicate the study with a larger sample size to have sufficient power (at least 80%)]]]

.pull-left[.full-width[.content-box-purple[Deception may have had low credibility, affecting rate & expectation of cooperation]]]

.pull-right[.full-width[.content-box-green[Replicate the study with a human opponent using z-Tree]]]

.pull-left[.full-width[.content-box-purple[Low internal consistency for PPI-R Coldheartedness]]]

.pull-right[.full-width[.content-box-green[Use a longer version of the PPI-R]]]

.pull-left[.full-width[.content-box-purple[Assumed that participants would not be able to detect TFT]]]

.pull-right[.full-width[.content-box-green[Examine Dunning-Kruger effect for emotion recognition ability after controlling for the participants’ age & gender]]]

---
class: partial-bg center, middle, inverse
count: false

# Questions

```{r, echo = FALSE}
question <- image_read("https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/questions.png")

image_negate(question)
```

???

Thank you so much for listening! If there are any questions about my presentation, I can answer them now. 

---
count: false

.center[
```{r, echo = FALSE, out.width = "700px"}
knitr::include_graphics("https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/brain.png")
```
]

.small[.left[.footnote[.gray[de Brito et al., 2020]]]]

???

Studies exploring neural correlates of psychopathy have supported these findings, with psychopathic traits showing associations with hypoactivity in areas implicated in interpersonal decision making, including but not limited to the orbitofrontal cortex (Yang & Raine, 2008), dorsolateral prefrontal cortex (Koenigs, 2014), and the amygdala (Blair, 2007). 

---
count: false


## Dunning-Kruger Effect 

![dunning-kruger](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/dunning-kruger.png)

.small[.left[.footnote[.gray[Kruger & Dunning, 2019; Lévy-Garboua et al., 2017; Sanchez & Dunning, 2019]]]]

???

auxiliary analyses on the presence of a Dunning-Kruger effect (i.e., the general tendency for lowest performers to overestimate performance and for the highest performers to underestimate performance, showing a curvilinear trend of confidence in relation to ability; Kruger & Dunning, 1999) for emotion recognition ability independent of psychopathy, and assess whether psychopathy explains significant variance in the participant’s estimates of their emotion recognition ability. If psychopathy is associated with a global deficit in emotion recognition, and patterns consistent Dunning-Kruger effect emerge such that participants with greater deficits in emotion recognition ability and higher levels of psychopathy show significant overestimation of emotion recognition ability, this may influence the inference of intentions from assessing the congruence of affective feedback (i.e., engaging in reverse appraisal) for participants with higher levels of psychopathy in the iterated PD task. To date, few studies have examined the influence of of individual differences in personality on the Dunning-Kruger effect, and only one study looked at the influence of personality specifically on the Dunning-Kruger effect for emotion recognition ability. Therefore, these auxiliary analyses will be exploratory in nature.

--- 
count: false 

## Hypotheses 

.full-width[.content-box-grey[**Hypothesis 1a** <br> <br> Actual and estimated emotion recognition ability would be weakly correlated <br> <br> Consistency with Dunning-Kruger effect]]

???

I predicted that actual and estimated emotion recognition ability will be weakly correlated, but consistent with the Dunning-Kruger effect.  

--

.full-width[.content-box-grey[**Hypothesis 1b** <br> <br> Psychopathy explains significant variance in estimates of emotion recognition ability <br> <br> 
<span style="color: transparent;  text-shadow: 0 0 0 green; ">&#10133;</span> Psychopathy  &#10140; <span style="color: transparent;  text-shadow: 0 0 0 red; "> &#10134; </span>  Estimate of emotion recognition ability]]

???

Furthermore, I predicted that psychopathy will explain significant variance in the participant’s estimates of their emotion recognition ability. Specifically, higher levels of psychopathy will be associated with lower estimates of emotion recognition ability.

---
count: false
## Results

.pull-left[.full-width[.content-box-red[<font style="opacity:0"> asfdasdfasdf</font> <br> <br>  **Hypothesis 1a** <br> <br> Actual and estimated emotion recognition ability would be weakly correlated <br> <br>.red[**Not Supported**] <font style="opacity:0"> asfdasdfasdf</font> <br> <br><font style="opacity:0"> asfdasdfasdf</font> <br> <br>]]]

.pull-right[
```{r, echo = FALSE}
ggscatterstats(data=combined_dat, 
               x=FERT_Score_2, 
               y=FERT_CorrectEstimate, 
               xlab = "Actual FERT Score", 
               ylab = "Estimated FERT Score", 
               caption = "FERT = Facial Expression Recognition Task")
```
]

???

Overall, participants’ estimated and actual performance on the FERT as measured by the proportion of correct responses on the FERT were not significantly associated, t(235) = 1.53, p = 0.13, r = 0.10. This finding was in contrast to Hypothesis 1a, which predicted that a small correlation would be found. 

As recent studies have shown that adults with typical facial expression recognition ability have only modest cognitive insight into their ability (see review by Palermo et al., 2017), it was hypothesized that facial emotion recognition ability as measured by the proportion of correct responses on the FERT would be weakly correlated with estimated measures of performance. The relation between measured and estimated emotion recognition ability has been debated; some studies have found small or non-significant associations (Bowles et al., 2009; Hall et al., 1999), whereas other studies have found robust associations that demonstrate increased cognitive awareness of emotion recognition ability in comparison to other cognitive abilities (Arizpe et al., 2019; Zell & Krizan, 2014). Consistent with previous research (e.g., Hall et al., 1999), the present study found a statistically insignificant relation between actual and estimated emotion recognition ability. 

---
count: false
## Results 

.pull-left[.full-width[.content-box-yellow[<font style="opacity:0"> asfdasdfasdf</font> <br> <br> **Hypothesis 1a** <br> <br> Consistent with the Dunning-Kruger effect <br> <br> .orange[**Partially supported**<font style="opacity:0"> asfdasdfasdf</font> <br> <br><font style="opacity:0"> asfdasdfasdf</font> <br> <br>]]]]

.pull-right[ 
```{r, echo = FALSE}
vQuart = quantile(combined_dat$FERT_Score_2, c(0:4/4))

# classify values
combined_dat$quartile = with(combined_dat, 
               cut(FERT_Score_2, 
                   vQuart, 
                   include.lowest = T, 
                   labels = c("Bottom", "Second", "Third", "Top")))

combined_dat$quartile <- as.factor(combined_dat$quartile)

Quartile <- rep(c("Bottom", "Second", "Third", "Top"), 2)
Prpt <- c(0.5844749, 0.6844262, 0.7352941, 0.8135684, 0.6252055, 0.6455738, 0.6698039, 0.6813462)
Measure <- c(rep(c("Actual"), 4), rep(c("Estimate"), 4))

dk.data.quart <- data.frame(Quartile, Prpt, Measure)

dk.quart.bottom <- combined_dat[combined_dat$quartile=="Bottom", c("FERT_Score_2", "FERT_CorrectEstimate")]

dk.quart.bottom <- gather(dk.quart.bottom, Group, Proportion, FERT_Score_2, FERT_CorrectEstimate)

dk.quart.second <- combined_dat[combined_dat$quartile=="Second", c("FERT_Score_2", "FERT_CorrectEstimate")]

dk.quart.second <- gather(dk.quart.second, Group, Proportion, FERT_Score_2, FERT_CorrectEstimate)

dk.quart.third <- combined_dat[combined_dat$quartile=="Third", c("FERT_Score_2", "FERT_CorrectEstimate")]

dk.quart.top <- combined_dat[combined_dat$quartile=="Top", c("FERT_Score_2", "FERT_CorrectEstimate")]

quart_plot <- ggplot(data=dk.data.quart, aes(x=Quartile, y=Prpt, group=Measure)) +
  geom_point(aes(color=Measure)) + 
  geom_line(aes(color=Measure)) + 
  scale_color_manual(values = c("#CAB2D6", "#6A3D9A"), labels = c("Actual", "Estimate")) + 
  labs(y = "Average Proportion of Correct Responses")

quart_plot
```
]

???

Pairwise comparisons for quartiles revealed similar patterns, with participants in the bottom quartile not showing statistically significant overestimation of their performance on the FERT (t(72) = 1.61, p = .111) and participants in the second quartile also not showing statistically significant underestimation of their performance on the FERT (t(60) = -1.79, p = 0.078). However, consistent with predictions for the Dunning-Kruger effect, participants in upper quartiles underestimated their performance (third quartile: t(50) = -3.32, p < 0.001; top quartile: t(51) = -6.01, p < 0.001). 

---
count: false
## Results 

.pull-left[.full-width[.content-box-yellow[<font style="opacity:0"> asfdasdfasdf</font> <br> <br> **Hypothesis 1a** <br> <br> Consistent with the Dunning-Kruger effect <br> <br> .orange[**Partially supported**<font style="opacity:0"> asfdasdfasdf</font> <br> <br><font style="opacity:0"> asfdasdfasdf</font> <br> <br>]]]]

.pull-right[ 
```{r, echo = FALSE}
vTert = quantile(combined_dat$FERT_Score_2, c(0:3/3))

# classify values
combined_dat$tertile = with(combined_dat, 
                             cut(FERT_Score_2, 
                                 vTert, 
                                 include.lowest = T, 
                                 labels = c("Lower", "Middle", "Upper")))

Tertile <- rep(c("Lower", "Middle", "Upper"), 2)
Prpt <- c(0.6035088, 0.7058081, 0.7934942, 0.6386316, 0.6412121, 0.6792105)
Measure <- c(rep(c("Actual"), 3), rep(c("Estimate"), 3))

dk.data.tert <- data.frame(Tertile, Prpt, Measure)

dk.tert.lower <- dk.data.tert[ c(1,4), ]

dk.tert.middle <- dk.data.tert[ c(2,5), ]

dk.tert.upper <- dk.data.tert[ c(3,6), ]

tert_plot <- ggplot(data=dk.data.tert, aes(x=Tertile, y=Prpt, group=Measure)) +
  geom_point(aes(color=Measure)) + 
  geom_line(aes(color=Measure)) + 
  scale_color_manual(values = c("#CAB2D6", "#6A3D9A"), labels = c("Actual", "Estimate")) + 
  labs(y = "Average Proportion of Correct Responses", x = "Tercile")

tert_plot
```
]

???

Before conducting paired t-tests, average proportions of correct responses for the FERT by tercile and quartile were computed. Pairwise comparisons for terciles revealed that participants in the lower tercile did not overestimate their performance on the FERT (t(94) = 1.73, p = 0.086), contrary to the predictions for the Dunning-Kruger effect. However, statistically significant overestimation was found in both middle and upper terciles (2nd tercile: t(65) = -0.06, p = 0.003; 3rd tercile: t(75) = -0.11, p < 0.001), consistent with trends of a Dunning-Kruger effect. 

---
count: false
## Results

.pull-left[.full-width[.content-box-yellow[<font style="opacity:0"> asfdasdfasdf</font> <br> <br> **Hypothesis 1a** <br> <br> Consistent with the Dunning-Kruger effect <br> <br> .orange[**Partially supported**<font style="opacity:0"> asfdasdfasdf</font> <br> <br><font style="opacity:0"> asfdasdfasdf</font> <br> <br>]]]]

.pull-right[ 
```{r, echo = FALSE}

ggplot(combined_dat, aes(x=FERT_Score_2, y=FERT_CorrectEstimate)) + 
  geom_point() +
  geom_smooth(aes(colour="Linear"), method='lm', se=FALSE, formula=y~x) + 
  geom_smooth(aes(colour="Quadratic"), method='lm', se=FALSE, formula=y~poly(x,2)) + 
  geom_smooth(aes(colour="Cubic"), method='lm', se=FALSE, formula=y~poly(x,3)) +
  labs(x = "Proportion of Correct FERT Responses", y = "FERT Self-Report Performance Estimate") + 
  scale_colour_manual(name="Model", values=c("mediumslateblue", "mediumturquoise", "lightsalmon")) + 
  guides(colour = guide_legend(override.aes = list(alpha = 0))) +
  theme_classic() 
```
]

???

Mixed-model regression analyses were subsequently conducted to test for curvilinearity with linear, quadratic, and cubic components, as recommended by Sanchez & Dunning (2018). Standardized parameters were obtained by fitting the model on a standardized version of the dataset, and 95% Confidence Intervals (CIs) and p-values were computed using the Wald approximation. With the composite score calculated by the Bayesian 2PL procedure as the measure of participants’ performance on FERT, a cubic model produced the best fit (R^2 = .043). In this cubic model, the linear and cubic trends were both found to be statistically significant (linear: b = 0.35, 95% CI [0.13, 0.56], t(233) = 3.20, p = 0.002; β = 0.35, 95% CI [0.13, 0.56]; cubic: b = -0.08, 95% CI [-0.14, -0.02], t(233) = -2.76, p = 0.006; β = -0.31, 95% CI [-0.53, -0.09])).  

---
count: false
## Results

.pull-left[.full-width[.content-box-yellow[<font style="opacity:0"> asfdasdfasdf</font> <br> <br> **Hypothesis 1a** <br> <br> Consistent with the Dunning-Kruger effect <br> <br> .orange[**Partially supported**<font style="opacity:0"> asfdasdfasdf</font> <br> <br><font style="opacity:0"> asfdasdfasdf</font> <br> <br>]]]]

.pull-right[ 
```{r, echo = FALSE}
ggplot(combined_dat, aes(x=FERT_Score, y=FERT_CorrectEstimate)) + 
  geom_point() +
  geom_smooth(aes(colour="Linear"), method='lm', se=FALSE, formula=y~x) + 
  geom_smooth(aes(colour="Quadratic"), method='lm', se=FALSE, formula=y~poly(x,2)) + 
  geom_smooth(aes(colour="Cubic"), method='lm', se=FALSE, formula=y~poly(x,3)) +
  labs(x = "FERT Score", y = "FERT Self-Report Performance Estimate") + 
  scale_colour_manual(name="Model", values=c("mediumslateblue", "mediumturquoise", "lightsalmon")) + 
  guides(colour = guide_legend(override.aes = list(alpha = 0))) +
  theme_classic() 
```
]

???

Mixed-model regression analyses were subsequently conducted to test for curvilinearity with linear, quadratic, and cubic components, as recommended by Sanchez & Dunning (2018). Standardized parameters were obtained by fitting the model on a standardized version of the dataset, and 95% Confidence Intervals (CIs) and p-values were computed using the Wald approximation. With the composite score calculated by the Bayesian 2PL procedure as the measure of participants’ performance on FERT, a cubic model produced the best fit (R^2 = .043). In this cubic model, the linear and cubic trends were both found to be statistically significant (linear: b = 0.35, 95% CI [0.13, 0.56], t(233) = 3.20, p = 0.002; β = 0.35, 95% CI [0.13, 0.56]; cubic: b = -0.08, 95% CI [-0.14, -0.02], t(233) = -2.76, p = 0.006; β = -0.31, 95% CI [-0.53, -0.09])).  

---
count: false
## Results 

.pull-left[.full-width[.content-box-red[<font style="opacity:0"> asfdasdfasdf</font> <br> <br>**Hypothesis 1b** <br> <br> Psychopathy explains significant variance in estimates of emotion recognition ability <br> <br> .red[**Not supported** <font style="opacity:0"> asfdasdfasdf</font> <br> <br><font style="opacity:0"> asfdasdfasdf</font> <br> <br>]
]]]

.pull-right[
![S1-2](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/s1-2.png)
]

???

As the composite FERT score calculated with the Bayesian 2PL procedure was negatively related to PPI-R Machiavellian Egocentricity only (r = -0.18, p = .0097), fixed-effects ANOVAs were conducted to assess whether the level of Machiavellian Egocentricity significantly differ between the terciles and quartiles for emotion recognition ability. Results indicated that the level of Machiavellian Egocentricity did not vary significantly between terciles (F(2, 205) = 1.57, p = 0.211; η_p^2 = 0.02, 95% CI [0.00, 1.00]) or quartiles (F(3, 204) = 1.67, p = 0.174; η_p^2 = 0.02, 95% CI [0.00, 1.00]), not supporting Hypothesis 1b. Therefore, the relation between Machiavellian Egocentricity and the Dunning-Kruger effect for emotion recognition ability was not examined. 

---

class: middle
count: false 

![ppi-r](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/ppir.png)

---
count: false
class: middle 

![S1](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/S1.png)

---
count: false
class: middle 

![S14](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/S14.png)

---
count: false
class: middle

![S2](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/S2.png)

---
count: false
class: middle

![S3](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/S3.png)

---
count: false
class: middle

![S6](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/S6.png)

---
count: false
class: middle 

![Table1](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/Table1.png)

---
count: false
class: middle

![Table2](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/Table2.png)

---
count: false
class: middle 

![Table4-1](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/Table4_1.png)

---
count: false
class: middle

![Table4-2](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/Table4_2.png)

---
count: false
class: middle

![Table5](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/Table5.png)

---
count: false
class: middle 

![Table7](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/Table7.png)

---
count: false
class: middle 

![Table8](https://raw.githubusercontent.com/carolinelee78/Honors-Thesis/main/Defense/Table8.png)









































